
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Devices: collections of PVs &#8212; Epics Channel Access for Python</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/epicsdoc.css?v=29cb9c05" />
    <script src="_static/documentation_options.js?v=e2a51986"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Alarms: respond when a PV goes out of range" href="alarm.html" />
    <link rel="prev" title="Working with waveform / array data" href="arrays.html" /> 
  </head><body>
<div style="background-color: #E7F0F3; text-align: left; padding: 8px 4px 8px 4px">
  <font size=+3><a href="index.html">
      <img src="_static/pyepics.png" height=50 border="0" alt="pyepics"/>
    &nbsp; PyEpics: Epics Channel Access for Python</a>
  </font>
</div>

    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="alarm.html" title="Alarms: respond when a PV goes out of range"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="arrays.html" title="Working with waveform / array data"
             accesskey="P">previous</a> |</li>
   <li>[<a href="installation.html">install</a></li>
   <li>|<a href="overview.html">overview</a></li>
   <li>|<a href="pv.html">pv</a></li>
   <li>|<a href="ca.html">ca</a></li>
   <li>|<a href="arrays.html">arrays</a></li>
   <li>|<a href="#">devices</a></li>
   <li>|<a href="alarm.html">alarm</a></li>
   <li>|<a href="autosave.html">autosave</a></li>
   <li>|<a href="wx.html">wx</a></li>
   <li>|<a href="advanced.html">advanced</a>]</li>

        <li class="nav-item nav-item-this"><a href="">Devices: collections of PVs</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Devices: collections of PVs</a><ul>
<li><a class="reference internal" href="#module-device">Overview</a><ul>
<li><a class="reference internal" href="#device.Device"><code class="docutils literal notranslate"><span class="pre">Device</span></code></a></li>
<li><a class="reference internal" href="#device.PV"><code class="docutils literal notranslate"><span class="pre">PV()</span></code></a></li>
<li><a class="reference internal" href="#device.put"><code class="docutils literal notranslate"><span class="pre">put()</span></code></a></li>
<li><a class="reference internal" href="#device.get"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a></li>
<li><a class="reference internal" href="#device.add_callback"><code class="docutils literal notranslate"><span class="pre">add_callback()</span></code></a></li>
<li><a class="reference internal" href="#device.add_pv"><code class="docutils literal notranslate"><span class="pre">add_pv()</span></code></a></li>
<li><a class="reference internal" href="#device.save_state"><code class="docutils literal notranslate"><span class="pre">save_state()</span></code></a></li>
<li><a class="reference internal" href="#device.restore_state"><code class="docutils literal notranslate"><span class="pre">restore_state()</span></code></a></li>
<li><a class="reference internal" href="#device.write_state"><code class="docutils literal notranslate"><span class="pre">write_state()</span></code></a></li>
<li><a class="reference internal" href="#device.read_state"><code class="docutils literal notranslate"><span class="pre">read_state()</span></code></a></li>
<li><a class="reference internal" href="#device._pvs"><code class="docutils literal notranslate"><span class="pre">_pvs</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-motor">Epics Motor Device</a><ul>
<li><a class="reference internal" href="#the-epics-motor-class">The <code class="xref py py-class docutils literal notranslate"><span class="pre">epics.Motor</span></code> class</a><ul>
<li><a class="reference internal" href="#motor.Motor"><code class="docutils literal notranslate"><span class="pre">Motor</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#methods-for-epics-motor">methods for <code class="xref py py-class docutils literal notranslate"><span class="pre">epics.Motor</span></code></a><ul>
<li><a class="reference internal" href="#motor.get"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a></li>
<li><a class="reference internal" href="#motor.put"><code class="docutils literal notranslate"><span class="pre">put()</span></code></a></li>
<li><a class="reference internal" href="#motor.check_limits"><code class="docutils literal notranslate"><span class="pre">check_limits()</span></code></a></li>
<li><a class="reference internal" href="#motor.within_limits"><code class="docutils literal notranslate"><span class="pre">within_limits()</span></code></a></li>
<li><a class="reference internal" href="#motor.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li><a class="reference internal" href="#motor.tweak"><code class="docutils literal notranslate"><span class="pre">tweak()</span></code></a></li>
<li><a class="reference internal" href="#motor.get_position"><code class="docutils literal notranslate"><span class="pre">get_position()</span></code></a></li>
<li><a class="reference internal" href="#motor.set_position"><code class="docutils literal notranslate"><span class="pre">set_position()</span></code></a></li>
<li><a class="reference internal" href="#motor.get_pv"><code class="docutils literal notranslate"><span class="pre">get_pv()</span></code></a></li>
<li><a class="reference internal" href="#motor.set_callback"><code class="docutils literal notranslate"><span class="pre">set_callback()</span></code></a></li>
<li><a class="reference internal" href="#motor.clear_callback"><code class="docutils literal notranslate"><span class="pre">clear_callback()</span></code></a></li>
<li><a class="reference internal" href="#motor.show_info"><code class="docutils literal notranslate"><span class="pre">show_info()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#other-device-examples">Other Device Examples</a><ul>
<li><a class="reference internal" href="#a-basic-device-without-a-prefix">A basic Device without a prefix</a></li>
<li><a class="reference internal" href="#epics-ai-record-as-device">Epics ai record as Device</a></li>
<li><a class="reference internal" href="#epics-scaler-record-as-device">Epics Scaler Record as Device</a></li>
<li><a class="reference internal" href="#other-devices-included-in-pyepics">Other Devices included in PyEpics</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="arrays.html"
                          title="previous chapter">Working with waveform / array data</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="alarm.html"
                          title="next chapter">Alarms: respond when a PV goes out of range</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/devices.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="devices-collections-of-pvs">
<h1>Devices: collections of PVs<a class="headerlink" href="#devices-collections-of-pvs" title="Link to this heading">¶</a></h1>
<section id="module-device">
<span id="overview"></span><h2>Overview<a class="headerlink" href="#module-device" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="#module-device" title="device: collections of related PVs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">device</span></code></a> module provides a simple interface to a collection of
PVs.  Here an epics <a class="reference internal" href="#device.Device" title="device.Device"><code class="xref py py-class docutils literal notranslate"><span class="pre">device.Device</span></code></a> is an object holding a set of
PVs, all sharing a prefix, but having many <em>attributes</em>.  Many PVs will
have names made up of <em>prefix+attribute</em>, with a common prefix for several
related PVs.  This almost describes an Epics Record, but as it is concerned
only with PV names, the mapping to an Epics Record is not exact.  On the
other hand, the concept of a <em>device</em> is more flexible than a predefined
Epics Record as it can actually hold PVs from several different records.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">motor1</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">Device</span><span class="p">(</span><span class="s1">&#39;XXX:motor1.&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;VAL&#39;</span><span class="p">,</span> <span class="s1">&#39;RBV&#39;</span><span class="p">,</span> <span class="s1">&#39;DESC&#39;</span><span class="p">,</span> <span class="s1">&#39;RVAL&#39;</span><span class="p">,</span>
                                           <span class="s1">&#39;LVIO&#39;</span><span class="p">,</span> <span class="s1">&#39;HLS&#39;</span><span class="p">,</span> <span class="s1">&#39;LLS&#39;</span><span class="p">))</span>
<span class="n">motor1</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;VAL&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Motor </span><span class="si">{</span><span class="n">motor1</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DESC&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">motor1</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RBV&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">motor1</span><span class="o">.</span><span class="n">VAL</span> <span class="o">=</span> <span class="mi">0</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Motor </span><span class="si">{</span><span class="n">motor1</span><span class="o">.</span><span class="n">DESC</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">motor1</span><span class="o">.</span><span class="n">RBV</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>While useful on its own like this, the real point of a <em>device</em> is as a
base class, to be inherited and extended.  In fact, there is a more
sophisticated   Motor device described below at <a class="reference internal" href="#device-motor-label"><span class="std std-ref">Epics Motor Device</span></a></p>
<dl class="py class">
<dt class="sig sig-object py" id="device.Device">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">Device</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">delim=''</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">attrs=None</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#device.Device" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>The attribute PVs are built as needed and held in an internal buffer
<code class="xref py py-data docutils literal notranslate"><span class="pre">self._pvs</span></code>.  This class is kept intentionally simple so that it may
be subclassed.</p>
<p>To pre-load attribute names on initialization, provide a list or tuple of
attributes with the <cite>attr</cite> option.</p>
<p>Note that <em>prefix</em> is actually optional.  When left off, this class can be
used as an arbitrary container of PVs, or to turn any subclass into an
epics Device.</p>
<p>In general, PV names will be mapped as prefix+delim+attr.  See
<a class="reference internal" href="#device.add_pv" title="device.add_pv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_pv()</span></code></a> for details of how to override this.</p>
<dl class="py method">
<dt class="sig sig-object py" id="device.PV">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">PV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">attr[,</span> <span class="pre">connect=True[,</span> <span class="pre">**kw]]]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#device.PV" title="Link to this definition">¶</a></dt>
<dd><p>returns the <cite>PV</cite> object for a device attribute.  The connect argument
and any other keyword arguments are passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">epics.PV()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="device.put">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">wait=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout=10.0</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#device.put" title="Link to this definition">¶</a></dt>
<dd><p>put an attribute value, optionally wait for completion or up to a
supplied timeout value</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="device.get">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">as_string=False</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#device.get" title="Link to this definition">¶</a></dt>
<dd><p>get an attribute value, option as_string returns a string
representation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="device.add_callback">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">add_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#device.add_callback" title="Link to this definition">¶</a></dt>
<dd><p>add a callback function to an attribute PV, so that the callback
function will be run when the at tribute’s value changes</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="device.add_pv">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">add_pv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">attr=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">**kw</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#device.add_pv" title="Link to this definition">¶</a></dt>
<dd><p>adds an explicitly names <code class="xref py py-meth docutils literal notranslate"><span class="pre">epics.PV()</span></code> to the device even though it
may violate the normal naming rules (in which <cite>attr</cite> is mapped to
<cite>epics.PV(prefix+delim+attr)</cite>.   That is, one can say:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">epics</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">Device</span><span class="p">(</span><span class="s1">&#39;XXX:m1&#39;</span><span class="p">,</span> <span class="n">delim</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<span class="n">m1</span><span class="o">.</span><span class="n">add_pv</span><span class="p">(</span><span class="s1">&#39;XXX:m2.VAL&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;other&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="o">.</span><span class="n">VAL</span><span class="p">)</span>     <span class="c1"># print value of XXX:m1.VAL</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="o">.</span><span class="n">other</span><span class="p">)</span>   <span class="c1"># prints value of XXX:m2.VAL</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="device.save_state">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">save_state</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#device.save_state" title="Link to this definition">¶</a></dt>
<dd><p>return a dictionary of all current values – the ‘’current state’’.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="device.restore_state">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">restore_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#device.restore_state" title="Link to this definition">¶</a></dt>
<dd><p>restores a saved state, as saved with <a class="reference internal" href="#device.save_state" title="device.save_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save_state()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="device.write_state">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">write_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">state=None</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#device.write_state" title="Link to this definition">¶</a></dt>
<dd><p>write a saved state to a file.   If no state is provide, the current state is written.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="device.read_state">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">read_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">restore=False</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#device.read_state" title="Link to this definition">¶</a></dt>
<dd><p>reads a state from a file, as written with <a class="reference internal" href="#device.write_state" title="device.write_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_state()</span></code></a>, and returns it.
If ‘’restore’’ is <code class="docutils literal notranslate"><span class="pre">True</span></code>, the read state will be restored.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="device._pvs">
<span class="sig-prename descclassname"><span class="pre">device.</span></span><span class="sig-name descname"><span class="pre">_pvs</span></span><a class="headerlink" href="#device._pvs" title="Link to this definition">¶</a></dt>
<dd><p>a dictionary of PVs making up the device.</p>
</dd></dl>

</section>
<section id="module-motor">
<span id="epics-motor-device"></span><span id="device-motor-label"></span><h2>Epics Motor Device<a class="headerlink" href="#module-motor" title="Link to this heading">¶</a></h2>
<p>The Epics Motor record has over 100 fields associated with it.  Of course,
it is often preferable to think of 1 Motor with many attributes than 100
or so separate PVs.  Many of the fields of the Motor record are
interrelated and influence other settings, including limits on the range of
motion which need to be respected, and which may send notifications when
they are violated.  Thus, there is a fair amount of functionality for a
Motor.  Typically, the user just wants to move the motor by setting its
drive position, but a fully enabled Motor should allow the use to change
and read many of the Motor parameters.</p>
<p>The  <a class="reference internal" href="#motor.Motor" title="motor.Motor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Motor</span></code></a> class helps the user create and use Epics motors.
A simple example use would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">epics</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">Motor</span><span class="p">(</span><span class="s1">&#39;XXX:m1&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Motor: </span><span class="si">{</span><span class="n">m1</span><span class="o">.</span><span class="n">DESC</span><span class="si">}</span><span class="s1"> Currently at </span><span class="si">{</span><span class="n">m1</span><span class="o">.</span><span class="n">RBV</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">m1</span><span class="o">.</span><span class="n">tweak_val</span> <span class="o">=</span> <span class="mf">0.10</span>
<span class="n">m1</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">dial</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">m1</span><span class="o">.</span><span class="n">tweak</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s1">&#39;forward&#39;</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Motor: </span><span class="si">{</span><span class="n">m1</span><span class="o">.</span><span class="n">DESC</span><span class="si">}</span><span class="s1"> Currently at </span><span class="si">{</span><span class="n">m1</span><span class="o">.</span><span class="n">RBV</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Which will step the motor through a set of positions.    You’ll notice a
few features for Motor:</p>
<blockquote>
<div><p>1.  Motors can use English-name aliases for attributes for fields of the
motor record.  Thus ‘VAL’ can be spelled ‘drive’ and ‘DESC’ can be
‘description’.   The <a class="reference internal" href="#motorattr-table"><span class="std std-ref">Table of Motor Attributes</span></a>
give the list of names that can be used.</p>
<p>2.  The methods for setting positions can use the User, Dial, or Step
coordinate system, and can wait for completion.</p>
</div></blockquote>
<section id="the-epics-motor-class">
<h3>The <code class="xref py py-class docutils literal notranslate"><span class="pre">epics.Motor</span></code> class<a class="headerlink" href="#the-epics-motor-class" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="motor.Motor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">Motor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout=30.</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.Motor" title="Link to this definition">¶</a></dt>
<dd><p>create a Motor object for a named Epics Process Variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvname</strong> (<em>string</em>) – prefix name (no ‘.VAL’ needed!) of Epics Process Variable  for a Motor</p></li>
<li><p><strong>timeout</strong> (<em>float</em>) – time (in seconds) to wait before giving up trying to connect.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>Once created, a Motor should be ready to use.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">epics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Motor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">Motor</span><span class="p">(</span><span class="s1">&#39;XX:m1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">drive</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">slew_speed</span><span class="p">)</span>
<span class="go">1.030 Fine X 5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;device_type&#39;</span><span class="p">,</span> <span class="n">as_string</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">&#39;asynMotor&#39;</span>
</pre></div>
</div>
<p>A Motor has very many fields.  Only a few of them are created on
initialization – the rest are retrieved as needed.  The motor fields can
be retrieved either with an attribute or with the <a class="reference internal" href="#motor.get" title="motor.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> method.
A full list of Motor attributes and their aliases for the motor
record is given in <a class="reference internal" href="#motorattr-table"><span class="std std-ref">Table of Motor Attributes</span></a>.</p>
<blockquote id="motorattr-table">
<div><p>Table of Aliases for attributes for the epics <a class="reference internal" href="#motor.Motor" title="motor.Motor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Motor</span></code></a> class, and the
corresponding attribute name of the Motor Record field.</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>alias</strong></p></th>
<th class="head"><p><em>Motor Record field</em></p></th>
<th class="head"></th>
<th class="head"><p><strong>alias</strong></p></th>
<th class="head"><p><em>Motor Record field</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>disabled</p></td>
<td><p>_able.VAL</p></td>
<td></td>
<td><p>moving</p></td>
<td><p>MOVN</p></td>
</tr>
<tr class="row-odd"><td><p>acceleration</p></td>
<td><p>ACCL</p></td>
<td></td>
<td><p>resolution</p></td>
<td><p>MRES</p></td>
</tr>
<tr class="row-even"><td><p>back_accel</p></td>
<td><p>BACC</p></td>
<td></td>
<td><p>motor_status</p></td>
<td><p>MSTA</p></td>
</tr>
<tr class="row-odd"><td><p>backlash</p></td>
<td><p>BDST</p></td>
<td></td>
<td><p>offset</p></td>
<td><p>OFF</p></td>
</tr>
<tr class="row-even"><td><p>back_speed</p></td>
<td><p>BVEL</p></td>
<td></td>
<td><p>output_mode</p></td>
<td><p>OMSL</p></td>
</tr>
<tr class="row-odd"><td><p>card</p></td>
<td><p>CARD</p></td>
<td></td>
<td><p>output</p></td>
<td><p>OUT</p></td>
</tr>
<tr class="row-even"><td><p>dial_high_limit</p></td>
<td><p>DHLM</p></td>
<td></td>
<td><p>prop_gain</p></td>
<td><p>PCOF</p></td>
</tr>
<tr class="row-odd"><td><p>direction</p></td>
<td><p>DIR</p></td>
<td></td>
<td><p>precision</p></td>
<td><p>PREC</p></td>
</tr>
<tr class="row-even"><td><p>dial_low_limit</p></td>
<td><p>DLLM</p></td>
<td></td>
<td><p>readback</p></td>
<td><p>RBV</p></td>
</tr>
<tr class="row-odd"><td><p>settle_time</p></td>
<td><p>DLY</p></td>
<td></td>
<td><p>retry_max</p></td>
<td><p>RTRY</p></td>
</tr>
<tr class="row-even"><td><p>done_moving</p></td>
<td><p>DMOV</p></td>
<td></td>
<td><p>retry_count</p></td>
<td><p>RCNT</p></td>
</tr>
<tr class="row-odd"><td><p>dial_readback</p></td>
<td><p>DRBV</p></td>
<td></td>
<td><p>retry_deadband</p></td>
<td><p>RDBD</p></td>
</tr>
<tr class="row-even"><td><p>description</p></td>
<td><p>DESC</p></td>
<td></td>
<td><p>dial_difference</p></td>
<td><p>RDIF</p></td>
</tr>
<tr class="row-odd"><td><p>dial_drive</p></td>
<td><p>DVAL</p></td>
<td></td>
<td><p>raw_encoder_pos</p></td>
<td><p>REP</p></td>
</tr>
<tr class="row-even"><td><p>units</p></td>
<td><p>EGU</p></td>
<td></td>
<td><p>raw_high_limit</p></td>
<td><p>RHLS</p></td>
</tr>
<tr class="row-odd"><td><p>encoder_step</p></td>
<td><p>ERES</p></td>
<td></td>
<td><p>raw_low_limit</p></td>
<td><p>RLLS</p></td>
</tr>
<tr class="row-even"><td><p>freeze_offset</p></td>
<td><p>FOFF</p></td>
<td></td>
<td><p>relative_value</p></td>
<td><p>RLV</p></td>
</tr>
<tr class="row-odd"><td><p>move_fraction</p></td>
<td><p>FRAC</p></td>
<td></td>
<td><p>raw_motor_pos</p></td>
<td><p>RMP</p></td>
</tr>
<tr class="row-even"><td><p>hi_severity</p></td>
<td><p>HHSV</p></td>
<td></td>
<td><p>raw_readback</p></td>
<td><p>RRBV</p></td>
</tr>
<tr class="row-odd"><td><p>hi_alarm</p></td>
<td><p>HIGH</p></td>
<td></td>
<td><p>readback_res</p></td>
<td><p>RRES</p></td>
</tr>
<tr class="row-even"><td><p>hihi_alarm</p></td>
<td><p>HIHI</p></td>
<td></td>
<td><p>raw_drive</p></td>
<td><p>RVAL</p></td>
</tr>
<tr class="row-odd"><td><p>high_limit</p></td>
<td><p>HLM</p></td>
<td></td>
<td><p>dial_speed</p></td>
<td><p>RVEL</p></td>
</tr>
<tr class="row-even"><td><p>high_limit_set</p></td>
<td><p>HLS</p></td>
<td></td>
<td><p>s_speed</p></td>
<td><p>S</p></td>
</tr>
<tr class="row-odd"><td><p>hw_limit</p></td>
<td><p>HLSV</p></td>
<td></td>
<td><p>s_back_speed</p></td>
<td><p>SBAK</p></td>
</tr>
<tr class="row-even"><td><p>home_forward</p></td>
<td><p>HOMF</p></td>
<td></td>
<td><p>s_base_speed</p></td>
<td><p>SBAS</p></td>
</tr>
<tr class="row-odd"><td><p>home_reverse</p></td>
<td><p>HOMR</p></td>
<td></td>
<td><p>s_max_speed</p></td>
<td><p>SMAX</p></td>
</tr>
<tr class="row-even"><td><p>high_op_range</p></td>
<td><p>HOPR</p></td>
<td></td>
<td><p>set</p></td>
<td><p>SET</p></td>
</tr>
<tr class="row-odd"><td><p>high_severity</p></td>
<td><p>HSV</p></td>
<td></td>
<td><p>stop_go</p></td>
<td><p>SPMG</p></td>
</tr>
<tr class="row-even"><td><p>integral_gain</p></td>
<td><p>ICOF</p></td>
<td></td>
<td><p>s_revolutions</p></td>
<td><p>SREV</p></td>
</tr>
<tr class="row-odd"><td><p>jog_accel</p></td>
<td><p>JAR</p></td>
<td></td>
<td><p>stop</p></td>
<td><p>STOP</p></td>
</tr>
<tr class="row-even"><td><p>jog_forward</p></td>
<td><p>JOGF</p></td>
<td></td>
<td><p>t_direction</p></td>
<td><p>TDIR</p></td>
</tr>
<tr class="row-odd"><td><p>jog_reverse</p></td>
<td><p>JOGR</p></td>
<td></td>
<td><p>tweak_forward</p></td>
<td><p>TWF</p></td>
</tr>
<tr class="row-even"><td><p>jog_speed</p></td>
<td><p>JVEL</p></td>
<td></td>
<td><p>tweak_reverse</p></td>
<td><p>TWR</p></td>
</tr>
<tr class="row-odd"><td><p>last_dial_val</p></td>
<td><p>LDVL</p></td>
<td></td>
<td><p>tweak_val</p></td>
<td><p>TWV</p></td>
</tr>
<tr class="row-even"><td><p>low_limit</p></td>
<td><p>LLM</p></td>
<td></td>
<td><p>use_encoder</p></td>
<td><p>UEIP</p></td>
</tr>
<tr class="row-odd"><td><p>low_limit_set</p></td>
<td><p>LLS</p></td>
<td></td>
<td><p>u_revolutions</p></td>
<td><p>UREV</p></td>
</tr>
<tr class="row-even"><td><p>lo_severity</p></td>
<td><p>LLSV</p></td>
<td></td>
<td><p>use_rdbl</p></td>
<td><p>URIP</p></td>
</tr>
<tr class="row-odd"><td><p>lolo_alarm</p></td>
<td><p>LOLO</p></td>
<td></td>
<td><p>drive</p></td>
<td><p>VAL</p></td>
</tr>
<tr class="row-even"><td><p>low_op_range</p></td>
<td><p>LOPR</p></td>
<td></td>
<td><p>base_speed</p></td>
<td><p>VBAS</p></td>
</tr>
<tr class="row-odd"><td><p>low_alarm</p></td>
<td><p>LOW</p></td>
<td></td>
<td><p>slew_speed</p></td>
<td><p>VELO</p></td>
</tr>
<tr class="row-even"><td><p>last_rel_val</p></td>
<td><p>LRLV</p></td>
<td></td>
<td><p>version</p></td>
<td><p>VERS</p></td>
</tr>
<tr class="row-odd"><td><p>last_dial_drive</p></td>
<td><p>LRVL</p></td>
<td></td>
<td><p>max_speed</p></td>
<td><p>VMAX</p></td>
</tr>
<tr class="row-even"><td><p>last_SPMG</p></td>
<td><p>LSPG</p></td>
<td></td>
<td><p>use_home</p></td>
<td><p>ATHM</p></td>
</tr>
<tr class="row-odd"><td><p>low_severity</p></td>
<td><p>LSV</p></td>
<td></td>
<td><p>deriv_gain</p></td>
<td><p>DCOF</p></td>
</tr>
</tbody>
</table>
</section>
<section id="methods-for-epics-motor">
<h3>methods for <code class="xref py py-class docutils literal notranslate"><span class="pre">epics.Motor</span></code><a class="headerlink" href="#methods-for-epics-motor" title="Link to this heading">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="motor.get">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">as_string=False</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.get" title="Link to this definition">¶</a></dt>
<dd><p>sets a field attribute for the motor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>attr</strong> (<em>string</em><em> (</em><em>from table above</em><em>)</em>) – attribute name</p></li>
<li><p><strong>as_string</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/ <code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to return string value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>Note that <a class="reference internal" href="#motor.get" title="motor.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> can return the string value, while fetching the
attribute cannot do so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">Motor</span><span class="p">(</span><span class="s1">&#39;XXX:m1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">device_type</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;device_type&#39;</span><span class="p">,</span> <span class="n">as_string</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">&#39;asynMotor&#39;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="motor.put">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">wait=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout=30</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.put" title="Link to this definition">¶</a></dt>
<dd><p>sets a field attribute for the motor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>attr</strong> (<em>string</em><em> (</em><em>from table above</em><em>)</em>) – attribute name</p></li>
<li><p><strong>value</strong> – value for attribute</p></li>
<li><p><strong>wait</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to wait for completion.</p></li>
<li><p><strong>timeout</strong> (<em>float</em>) – time (in seconds) to wait before giving up trying to connect.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor.check_limits">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">check_limits</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.check_limits" title="Link to this definition">¶</a></dt>
<dd><p>checks whether the current motor position is causing a motor limit
violation, and raises a MotorLimitException if it is.</p>
<p>returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no limit violation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor.within_limits">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">within_limits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">limits='user'</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.within_limits" title="Link to this definition">¶</a></dt>
<dd><p>checks whether a target value <strong>would be</strong> a limit violation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – target value</p></li>
<li><p><strong>limits</strong> (<em>string</em>) – one of ‘user’, ‘dial’, or ‘raw’ for which limits to consider</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor.move">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">move</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">relative=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">wait=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout=300.0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">dial=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">raw=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">ignore_limits=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">confirm_move=False</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.move" title="Link to this definition">¶</a></dt>
<dd><p>moves motor to specified drive position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>val</strong> – value to move to (float) [Must be provided]</p></li>
<li><p><strong>relative</strong> – move relative to current position    (T/F) [F]</p></li>
<li><p><strong>wait</strong> – whether to wait for move to complete (T/F) [F]</p></li>
<li><p><strong>timeout</strong> – max time for move to complete (in seconds) [300]</p></li>
<li><p><strong>dial</strong> – use dial coordinates                 (T/F) [F]</p></li>
<li><p><strong>raw</strong> – use raw coordinates                  (T/F) [F]</p></li>
<li><p><strong>ignore_limits</strong> – try move without regard to limits    (T/F) [F]</p></li>
<li><p><strong>confirm_move</strong> – try to confirm that move has begun (when wait=False) (T/F) [F]</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>integer</p>
</dd>
</dl>
<p>Returns an integer value, according the table below.  Note that a return
value of 0 with <cite>wait=False</cite> does not really guarantee a successful
move, just that a move request was issued.  If you’re interested in
checking that a requested move really did start without waiting for the
move to complete, you may want to use the <cite>confirm_move=True</cite> option.</p>
</dd></dl>

<blockquote id="motor-move-return-vals-table">
<div><p>Table of return values from <a class="reference internal" href="#motor.move" title="motor.move"><code class="xref py py-func docutils literal notranslate"><span class="pre">move()</span></code></a>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>return value</p></th>
<th class="head"><p>meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-13</p></td>
<td><p>invalid value (cannot convert to float).  Move not attempted.</p></td>
</tr>
<tr class="row-odd"><td><p>-12</p></td>
<td><p>target value outside soft limits.         Move not attempted.</p></td>
</tr>
<tr class="row-even"><td><p>-11</p></td>
<td><p>drive PV is not connected:                Move not attempted.</p></td>
</tr>
<tr class="row-odd"><td><p>-8</p></td>
<td><p>move started, but timed-out.</p></td>
</tr>
<tr class="row-even"><td><p>-7</p></td>
<td><p>move started, timed-out, but appears done.</p></td>
</tr>
<tr class="row-odd"><td><p>-5</p></td>
<td><p>move started, unexpected return value from <a class="reference internal" href="#motor.put" title="motor.put"><code class="xref py py-func docutils literal notranslate"><span class="pre">put()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p>-4</p></td>
<td><p>move-with-wait finished, soft limit violation seen.</p></td>
</tr>
<tr class="row-odd"><td><p>-3</p></td>
<td><p>move-with-wait finished, hard limit violation seen.</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>move-with-wait finish OK.</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>move-without-wait executed, not confirmed.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>move-without-wait executed, move confirmed.</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>move-without-wait finished, hard limit violation seen.</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>move-without-wait finished, soft limit violation seen.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="motor.tweak">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">tweak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">direction='forward'</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">wait=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout=300.</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.tweak" title="Link to this definition">¶</a></dt>
<dd><p>move the motor by the current <em>tweak value</em></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>direction</strong> (<em>string: 'forward'</em><em> (</em><em>default</em><em>) or </em><em>'reverse'</em>) – direction of motion</p></li>
<li><p><strong>wait</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to wait for completion</p></li>
<li><p><strong>timeout</strong> (<em>float</em>) – max time for move to complete (in seconds) [default=300]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor.get_position">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">get_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">readback=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">dial=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">raw=False</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.get_position" title="Link to this definition">¶</a></dt>
<dd><p>Returns the motor position in user, dial or raw coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>readback</strong> – whether to return the readback position in the
desired coordinate system.  The default is to return the
drive position of the motor.</p></li>
<li><p><strong>dial</strong> – whether to return the position in dial coordinates.
The default is user coordinates.</p></li>
<li><p><strong>raw</strong> – whether to return the raw position.
The default is user coordinates.</p></li>
</ul>
</dd>
</dl>
<p>The “raw” and “dial” keywords are mutually exclusive.
The “readback” keyword can be used in user, dial or raw coordinates.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor.set_position">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">set_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">position[</span> <span class="pre">dial=False[,</span> <span class="pre">raw=False]]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor.set_position" title="Link to this definition">¶</a></dt>
<dd><p>set (that is, redefine) the current position to supplied value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> – The new motor position</p></li>
<li><p><strong>dial</strong> – whether to set in dial coordinates. The default is user coordinates.</p></li>
<li><p><strong>raw</strong> – <p>whether to set in raw coordinates. The default is user  coordinates.</p>
<p>The ‘raw’ and ‘dial’ keywords are mutually exclusive.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor.get_pv">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">get_pv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor.get_pv" title="Link to this definition">¶</a></dt>
<dd><p>returns the <cite>PV</cite> for the corresponding attribute.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor.set_callback">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">set_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr='drive'</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">callback=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">kw=None</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.set_callback" title="Link to this definition">¶</a></dt>
<dd><p>sets a callback on the <cite>PV</cite> for a particular attribute.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor.clear_callback">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">clear_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'drive'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor.clear_callback" title="Link to this definition">¶</a></dt>
<dd><p>clears a callback on the <cite>PV</cite> for a particular attribute.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor.show_info">
<span class="sig-prename descclassname"><span class="pre">motor.</span></span><span class="sig-name descname"><span class="pre">show_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#motor.show_info" title="Link to this definition">¶</a></dt>
<dd><p>prints out a table of attributes and their current values.</p>
</dd></dl>

</section>
</section>
<section id="other-device-examples">
<h2>Other Device Examples<a class="headerlink" href="#other-device-examples" title="Link to this heading">¶</a></h2>
<p>An epics Device provides a general way to group together a set of PVs.  The
examples below show how to build on this generality, and may inspire you to
build your own device classes.</p>
<section id="a-basic-device-without-a-prefix">
<h3>A basic Device without a prefix<a class="headerlink" href="#a-basic-device-without-a-prefix" title="Link to this heading">¶</a></h3>
<p>Here, we define a very simple device that does not even define a prefix.
This is not much more than a collection of PVs.  Since there is no prefix
given, all PVs in the device must be <em>fully qualified</em>.  Note that there is
no requirement to share a common prefix in such a collection of PVs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">epics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Device</span>
<span class="n">dev</span> <span class="o">=</span> <span class="n">Device</span><span class="p">()</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">dev</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;13IDC:m1.VAL&#39;</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">dev</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;13IDC:m2.VAL&#39;</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;13IDC:m1.VAL&#39;</span><span class="p">,</span> <span class="mf">2.8</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;13IDC:m2.VAL&#39;</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dev</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;13IDC:m3.DIR&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<p>Note that this device cannot use the attributes based on field names.</p>
<p>This may not look very interesting – why not just use a bunch of PVs?  If
ou consider <cite>Device</cite> to be a starting point for building more complicated
objects by subclassing <cite>Device</cite> and adding specialized methods, then it can
start to get interesting.</p>
</section>
<section id="epics-ai-record-as-device">
<h3>Epics ai record as Device<a class="headerlink" href="#epics-ai-record-as-device" title="Link to this heading">¶</a></h3>
<p>For a slightly more useful and typical example, the pyepics distribution
includes a Device for an Epics ai (analog input record).  The full
implementation of this device is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;Epics analog input record&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..</span><span class="w"> </span><span class="kn">import</span> <span class="n">Device</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ai</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
    <span class="s2">&quot;Simple analog input device&quot;</span>

    <span class="n">attrs</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;VAL&#39;</span><span class="p">,</span> <span class="s1">&#39;EGU&#39;</span><span class="p">,</span> <span class="s1">&#39;HOPR&#39;</span><span class="p">,</span> <span class="s1">&#39;LOPR&#39;</span><span class="p">,</span> <span class="s1">&#39;PREC&#39;</span><span class="p">,</span> <span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;DESC&#39;</span><span class="p">,</span>
             <span class="s1">&#39;DTYP&#39;</span><span class="p">,</span> <span class="s1">&#39;INP&#39;</span><span class="p">,</span> <span class="s1">&#39;LINR&#39;</span><span class="p">,</span> <span class="s1">&#39;RVAL&#39;</span><span class="p">,</span> <span class="s1">&#39;ROFF&#39;</span><span class="p">,</span> <span class="s1">&#39;EGUF&#39;</span><span class="p">,</span> <span class="s1">&#39;EGUL&#39;</span><span class="p">,</span>
             <span class="s1">&#39;AOFF&#39;</span><span class="p">,</span> <span class="s1">&#39;ASLO&#39;</span><span class="p">,</span> <span class="s1">&#39;ESLO&#39;</span><span class="p">,</span> <span class="s1">&#39;EOFF&#39;</span><span class="p">,</span> <span class="s1">&#39;SMOO&#39;</span><span class="p">,</span> <span class="s1">&#39;HIHI&#39;</span><span class="p">,</span> <span class="s1">&#39;LOLO&#39;</span><span class="p">,</span>
             <span class="s1">&#39;HIGH&#39;</span><span class="p">,</span> <span class="s1">&#39;LOW&#39;</span><span class="p">,</span> <span class="s1">&#39;HHSV&#39;</span><span class="p">,</span> <span class="s1">&#39;LLSV&#39;</span><span class="p">,</span> <span class="s1">&#39;HSV&#39;</span><span class="p">,</span> <span class="s1">&#39;LSV&#39;</span><span class="p">,</span> <span class="s1">&#39;HYST&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prefix</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">Device</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">delim</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>The code simply pre-defines the fields that are the <em>suffixes</em> of an Epics ai
input record, and subclasses <code class="xref py py-class docutils literal notranslate"><span class="pre">Device</span></code> with these fields to create the
corresponding PVs.  For most record suffixes, these will be available as
attributes of the Device object.  For example, the <code class="xref py py-class docutils literal notranslate"><span class="pre">ai</span></code> class above can
be used simply and cleanly as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">epics.devices</span><span class="w"> </span><span class="kn">import</span> <span class="n">ai</span>
<span class="n">This_ai</span> <span class="o">=</span> <span class="n">ai</span><span class="p">(</span><span class="s1">&#39;XXX.PRES&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Value: </span><span class="si">{</span><span class="n">This_ai</span><span class="o">.</span><span class="n">VAL</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Units: </span><span class="si">{</span><span class="n">This_ai</span><span class="o">.</span><span class="n">EGU</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Of course, you can also use the <a class="reference internal" href="#motor.get" title="motor.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a>, <a class="reference internal" href="#motor.put" title="motor.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a> methods above for a
basic <code class="xref py py-class docutils literal notranslate"><span class="pre">Device</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This_ai</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;DESC&#39;</span><span class="p">,</span> <span class="s1">&#39;My Pump&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Several of the other standard Epics records can easily be exposed as Devices in
this way, and the pyepics distribution includes such simple wrappings for the
Epics ao, bi, and bo records, as well as several more complex records from
synApps.</p>
</section>
<section id="epics-scaler-record-as-device">
<h3>Epics Scaler Record as Device<a class="headerlink" href="#epics-scaler-record-as-device" title="Link to this heading">¶</a></h3>
<p>For a slightly more complicated example: an incomplete, but very useful mapping
of the Scaler Record from synApps, including methods for changing modes, and
reading and writing data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python </span>
<span class="sd">&quot;&quot;&quot;Epics Scaler&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..</span><span class="w"> </span><span class="kn">import</span> <span class="n">Device</span><span class="p">,</span> <span class="n">poll</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Scaler</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">    Simple implementation of SynApps Scaler Record.   </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CNT&#39;</span><span class="p">,</span> <span class="s1">&#39;CONT&#39;</span><span class="p">,</span> <span class="s1">&#39;TP&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;VAL&#39;</span><span class="p">)</span>
    <span class="n">attr_kws</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;calc_enable&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_calcEnable.VAL&#39;</span><span class="p">}</span>
    <span class="n">chan_attrs</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;NM</span><span class="si">%i</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;S</span><span class="si">%i</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">calc_attrs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;calc</span><span class="si">%i</span><span class="s1">&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_calc</span><span class="si">%i</span><span class="s1">.VAL&#39;</span><span class="p">,</span> <span class="s1">&#39;expr</span><span class="si">%i</span><span class="s1">&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_calc</span><span class="si">%i</span><span class="s1">.CALC&#39;</span><span class="p">}</span>
    <span class="n">_nonpvs</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_prefix&#39;</span><span class="p">,</span> <span class="s1">&#39;_pvs&#39;</span><span class="p">,</span> <span class="s1">&#39;_delim&#39;</span><span class="p">,</span> <span class="s1">&#39;_nchan&#39;</span><span class="p">,</span> <span class="s1">&#39;_chans&#39;</span><span class="p">)</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">nchan</span><span class="o">=</span><span class="mi">8</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nchan</span>  <span class="o">=</span> <span class="n">nchan</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chans</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nchan</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="n">attrs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chans</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chan_attrs</span><span class="p">:</span>
                <span class="n">attrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">att</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                
        <span class="n">Device</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">delim</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attr_kws</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_pv</span><span class="p">(</span><span class="n">val</span> <span class="o">%</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span> <span class="n">key</span><span class="p">)</span>
            
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chans</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc_attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_pv</span><span class="p">(</span><span class="n">val</span> <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span> <span class="n">attr</span> <span class="o">=</span> <span class="n">key</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mutable</span> <span class="o">=</span> <span class="kc">False</span>
        
    <span class="k">def</span><span class="w"> </span><span class="nf">AutoCountMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;set to autocount mode&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;CONT&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">OneShotMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;set to one shot mode&quot;</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;CONT&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">CountTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctime</span><span class="p">):</span>
        <span class="s2">&quot;set count time&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;TP&#39;</span><span class="p">,</span> <span class="n">ctime</span><span class="p">)</span>
        
    <span class="k">def</span><span class="w"> </span><span class="nf">Count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctime</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="s2">&quot;set count, with optional counttime&quot;</span>
        <span class="k">if</span> <span class="n">ctime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CountTime</span><span class="p">(</span><span class="n">ctime</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;CNT&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="n">wait</span><span class="p">)</span>
        <span class="n">poll</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">EnableCalcs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot; enable calculations&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;calc_enable&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">setCalc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">calc</span><span class="p">):</span>
        <span class="s2">&quot;set the calculation for scaler i&quot;</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="s1">&#39;expr</span><span class="si">%i</span><span class="s1">&#39;</span>  <span class="o">%</span> <span class="n">i</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">calc</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getNames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;get all names&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NM</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chans</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">Read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_calc</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="s2">&quot;read all values&quot;</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="s1">&#39;S</span><span class="si">%i</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">use_calc</span><span class="p">:</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="s1">&#39;calc</span><span class="si">%i</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chans</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that we can then create a <code class="xref py py-class docutils literal notranslate"><span class="pre">scaler</span></code> object from its base PV
prefix, and use methods like <code class="xref py py-meth docutils literal notranslate"><span class="pre">Count()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Read()</span></code> without
directly invoking epics calls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s1</span> <span class="o">=</span> <span class="n">Scaler</span><span class="p">(</span><span class="s1">&#39;XXX:scaler1&#39;</span><span class="p">)</span>
<span class="n">s1</span><span class="o">.</span><span class="n">setCalc</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;(B-2000*A/10000000.)&#39;</span><span class="p">)</span>
<span class="n">s1</span><span class="o">.</span><span class="n">enableCalcs</span><span class="p">()</span>
<span class="n">s1</span><span class="o">.</span><span class="n">OneShotMode</span><span class="p">()</span>
<span class="n">s1</span><span class="o">.</span><span class="n">Count</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Names:    </span><span class="si">{</span><span class="n">s1</span><span class="o">.</span><span class="n">getNames</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Raw  values: </span><span class="si">{</span><span class="n">s1</span><span class="o">.</span><span class="n">Read</span><span class="p">(</span><span class="n">use_calc</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Calc values: </span><span class="si">{</span><span class="n">s1</span><span class="o">.</span><span class="n">Read</span><span class="p">(</span><span class="n">use_calc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="other-devices-included-in-pyepics">
<h3>Other Devices included in PyEpics<a class="headerlink" href="#other-devices-included-in-pyepics" title="Link to this heading">¶</a></h3>
<p>Several other Epics Records have been exposed as Devices, and included in
PyEpics distribution.  These vary some in how complete and feature-rich they
are, and are definitely skewed toward data collection at synchrotron beamlines.
A table of current Devices are listed in the <a class="reference internal" href="#devices-table"><span class="std std-ref">Table of Included Epics
Devices</span></a> table below.  For further details, consult the source
code for these modules.</p>
<blockquote id="devices-table">
<div><p>Table of Epics Devices Included in the PyEpics distribution.  For those
described as “pretty basic”, there are generally only PV suffixes to
attributes mapped.  Many of the others include one or more methods for
specific use of that Device.</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>module</strong></p></th>
<th class="head"><p><strong>class</strong></p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ad_base</p></td>
<td><p>AD_Camera</p></td>
<td><p>areaDetector Camera, pretty basic</p></td>
</tr>
<tr class="row-odd"><td><p>ad_fileplugin</p></td>
<td><p>AD_FilePlugin</p></td>
<td><p>areaDetector File Plugin, many methods</p></td>
</tr>
<tr class="row-even"><td><p>ad_image</p></td>
<td><p>AD_ImagePlugin</p></td>
<td><p>areaDetector Image, with ArrayData attribute</p></td>
</tr>
<tr class="row-odd"><td><p>ad_overlay</p></td>
<td><p>AD_OverlayPlugin</p></td>
<td><p>areaDetector Overlay, pretty basic</p></td>
</tr>
<tr class="row-even"><td><p>ad_perkinelmer</p></td>
<td><p>AD_PerkinElmer</p></td>
<td><p>PerkinElmer(xrd1600) detector, several methods</p></td>
</tr>
<tr class="row-odd"><td><p>ai</p></td>
<td><p>ai</p></td>
<td><p>analog input, pretty basic (as above)</p></td>
</tr>
<tr class="row-even"><td><p>ao</p></td>
<td><p>ao</p></td>
<td><p>analog output, pretty basic</p></td>
</tr>
<tr class="row-odd"><td><p>bi</p></td>
<td><p>bi</p></td>
<td><p>binary input, pretty basic</p></td>
</tr>
<tr class="row-even"><td><p>bo</p></td>
<td><p>bo</p></td>
<td><p>binary output, pretty basic</p></td>
</tr>
<tr class="row-odd"><td><p>mca</p></td>
<td><p>MCA</p></td>
<td><p>epics DXP record, pretty basic</p></td>
</tr>
<tr class="row-even"><td><p>mca</p></td>
<td><p>DXP</p></td>
<td><p>epics MCA record, get_rois()/get_calib()</p></td>
</tr>
<tr class="row-odd"><td><p>mca</p></td>
<td><p>MultiXMAP</p></td>
<td><p>Multiple XIA XMaps, several methods</p></td>
</tr>
<tr class="row-even"><td><p>scaler</p></td>
<td><p>Scaler</p></td>
<td><p>epics Scaler record, many methods</p></td>
</tr>
<tr class="row-odd"><td><p>scan</p></td>
<td><p>Scan</p></td>
<td><p>epics SScan record, some methods</p></td>
</tr>
<tr class="row-even"><td><p>srs570</p></td>
<td><p>SRS570</p></td>
<td><p>SRS570 Amplifier</p></td>
</tr>
<tr class="row-odd"><td><p>struck</p></td>
<td><p>Struck</p></td>
<td><p>SIS Multichannel Scaler, many methods</p></td>
</tr>
<tr class="row-even"><td><p>transform</p></td>
<td><p>Transform</p></td>
<td><p>epics userTransform record</p></td>
</tr>
<tr class="row-odd"><td><p>xspress3</p></td>
<td><p>Xspress3</p></td>
<td><p>Quantum Electronics Xspress3 Multi-MCA</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="alarm.html" title="Alarms: respond when a PV goes out of range"
             >next</a> |</li>
        <li class="right" >
          <a href="arrays.html" title="Working with waveform / array data"
             >previous</a> |</li>
   <li>[<a href="installation.html">install</a></li>
   <li>|<a href="overview.html">overview</a></li>
   <li>|<a href="pv.html">pv</a></li>
   <li>|<a href="ca.html">ca</a></li>
   <li>|<a href="arrays.html">arrays</a></li>
   <li>|<a href="#">devices</a></li>
   <li>|<a href="alarm.html">alarm</a></li>
   <li>|<a href="autosave.html">autosave</a></li>
   <li>|<a href="wx.html">wx</a></li>
   <li>|<a href="advanced.html">advanced</a>]</li>

        <li class="nav-item nav-item-this"><a href="">Devices: collections of PVs</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2021, Matthew Newville.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>