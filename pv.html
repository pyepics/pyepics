
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PV: Epics Process Variables &#8212; Epics Channel Access for Python</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/epicsdoc.css?v=29cb9c05" />
    <script src="_static/documentation_options.js?v=3d47302e"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ca: Low-level Channel Access module" href="ca.html" />
    <link rel="prev" title="PyEpics Overview" href="overview.html" /> 
  </head><body>
<div style="background-color: #E7F0F3; text-align: left; padding: 8px 4px 8px 4px">
  <font size=+3><a href="index.html">
      <img src="_static/pyepics.png" height=50 border="0" alt="pyepics"/>
    &nbsp; PyEpics: Epics Channel Access for Python</a>
  </font>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ca.html" title="ca: Low-level Channel Access module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="PyEpics Overview"
             accesskey="P">previous</a> |</li>
   <li>[<a href="installation.html">install</a></li>
   <li>|<a href="overview.html">overview</a></li>
   <li>|<a href="#">pv</a></li>
   <li>|<a href="ca.html">ca</a></li>
   <li>|<a href="arrays.html">arrays</a></li>
   <li>|<a href="devices.html">devices</a></li>
   <li>|<a href="alarm.html">alarm</a></li>
   <li>|<a href="autosave.html">autosave</a></li>
   <li>|<a href="wx.html">wx</a></li>
   <li>|<a href="advanced.html">advanced</a>]</li>

        <li class="nav-item nav-item-this"><a href="">PV: Epics Process Variables</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">PV: Epics Process Variables</a><ul>
<li><a class="reference internal" href="#the-pv-class">The <code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code> class</a><ul>
<li><a class="reference internal" href="#pv.PV"><code class="docutils literal notranslate"><span class="pre">PV</span></code></a></li>
<li><a class="reference internal" href="#methods">methods</a><ul>
<li><a class="reference internal" href="#pv.get"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a></li>
<li><a class="reference internal" href="#pv.get_with_metadata"><code class="docutils literal notranslate"><span class="pre">get_with_metadata()</span></code></a></li>
<li><a class="reference internal" href="#pv.put"><code class="docutils literal notranslate"><span class="pre">put()</span></code></a></li>
<li><a class="reference internal" href="#pv.get_ctrlvars"><code class="docutils literal notranslate"><span class="pre">get_ctrlvars()</span></code></a></li>
<li><a class="reference internal" href="#pv.get_timevars"><code class="docutils literal notranslate"><span class="pre">get_timevars()</span></code></a></li>
<li><a class="reference internal" href="#pv.poll"><code class="docutils literal notranslate"><span class="pre">poll()</span></code></a></li>
<li><a class="reference internal" href="#pv.connect"><code class="docutils literal notranslate"><span class="pre">connect()</span></code></a></li>
<li><a class="reference internal" href="#pv.wait_for_connection"><code class="docutils literal notranslate"><span class="pre">wait_for_connection()</span></code></a></li>
<li><a class="reference internal" href="#pv.disconnect"><code class="docutils literal notranslate"><span class="pre">disconnect()</span></code></a></li>
<li><a class="reference internal" href="#pv.reconnect"><code class="docutils literal notranslate"><span class="pre">reconnect()</span></code></a></li>
<li><a class="reference internal" href="#pv.clear_auto_monitor"><code class="docutils literal notranslate"><span class="pre">clear_auto_monitor()</span></code></a></li>
<li><a class="reference internal" href="#pv.add_callback"><code class="docutils literal notranslate"><span class="pre">add_callback()</span></code></a></li>
<li><a class="reference internal" href="#pv.remove_callback"><code class="docutils literal notranslate"><span class="pre">remove_callback()</span></code></a></li>
<li><a class="reference internal" href="#pv.clear_callbacks"><code class="docutils literal notranslate"><span class="pre">clear_callbacks()</span></code></a></li>
<li><a class="reference internal" href="#pv.run_callbacks"><code class="docutils literal notranslate"><span class="pre">run_callbacks()</span></code></a></li>
<li><a class="reference internal" href="#pv.run_callback"><code class="docutils literal notranslate"><span class="pre">run_callback()</span></code></a></li>
<li><a class="reference internal" href="#pv.force_read_access_rights"><code class="docutils literal notranslate"><span class="pre">force_read_access_rights()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#attributes">attributes</a><ul>
<li><a class="reference internal" href="#pv.value"><code class="docutils literal notranslate"><span class="pre">value</span></code></a></li>
<li><a class="reference internal" href="#pv.char_value"><code class="docutils literal notranslate"><span class="pre">char_value</span></code></a></li>
<li><a class="reference internal" href="#pv.status"><code class="docutils literal notranslate"><span class="pre">status</span></code></a></li>
<li><a class="reference internal" href="#pv.type"><code class="docutils literal notranslate"><span class="pre">type</span></code></a></li>
<li><a class="reference internal" href="#pv.ftype"><code class="docutils literal notranslate"><span class="pre">ftype</span></code></a></li>
<li><a class="reference internal" href="#pv.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
<li><a class="reference internal" href="#pv.count"><code class="docutils literal notranslate"><span class="pre">count</span></code></a></li>
<li><a class="reference internal" href="#pv.nelm"><code class="docutils literal notranslate"><span class="pre">nelm</span></code></a></li>
<li><a class="reference internal" href="#pv.read_access"><code class="docutils literal notranslate"><span class="pre">read_access</span></code></a></li>
<li><a class="reference internal" href="#pv.write_access"><code class="docutils literal notranslate"><span class="pre">write_access</span></code></a></li>
<li><a class="reference internal" href="#pv.access"><code class="docutils literal notranslate"><span class="pre">access</span></code></a></li>
<li><a class="reference internal" href="#pv.severity"><code class="docutils literal notranslate"><span class="pre">severity</span></code></a></li>
<li><a class="reference internal" href="#pv.timestamp"><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></a></li>
<li><a class="reference internal" href="#pv.posixseconds"><code class="docutils literal notranslate"><span class="pre">posixseconds</span></code></a></li>
<li><a class="reference internal" href="#pv.nanoseconds"><code class="docutils literal notranslate"><span class="pre">nanoseconds</span></code></a></li>
<li><a class="reference internal" href="#pv.precision"><code class="docutils literal notranslate"><span class="pre">precision</span></code></a></li>
<li><a class="reference internal" href="#pv.units"><code class="docutils literal notranslate"><span class="pre">units</span></code></a></li>
<li><a class="reference internal" href="#pv.enum_strs"><code class="docutils literal notranslate"><span class="pre">enum_strs</span></code></a></li>
<li><a class="reference internal" href="#pv.info"><code class="docutils literal notranslate"><span class="pre">info</span></code></a></li>
<li><a class="reference internal" href="#pv.upper_disp_limit"><code class="docutils literal notranslate"><span class="pre">upper_disp_limit</span></code></a></li>
<li><a class="reference internal" href="#pv.lower_disp_limit"><code class="docutils literal notranslate"><span class="pre">lower_disp_limit</span></code></a></li>
<li><a class="reference internal" href="#pv.upper_alarm_limit"><code class="docutils literal notranslate"><span class="pre">upper_alarm_limit</span></code></a></li>
<li><a class="reference internal" href="#pv.lower_alarm_limit"><code class="docutils literal notranslate"><span class="pre">lower_alarm_limit</span></code></a></li>
<li><a class="reference internal" href="#pv.lower_warning_limit"><code class="docutils literal notranslate"><span class="pre">lower_warning_limit</span></code></a></li>
<li><a class="reference internal" href="#pv.upper_warning_limit"><code class="docutils literal notranslate"><span class="pre">upper_warning_limit</span></code></a></li>
<li><a class="reference internal" href="#pv.upper_ctrl_limit"><code class="docutils literal notranslate"><span class="pre">upper_ctrl_limit</span></code></a></li>
<li><a class="reference internal" href="#pv.lower_ctrl_limit"><code class="docutils literal notranslate"><span class="pre">lower_ctrl_limit</span></code></a></li>
<li><a class="reference internal" href="#pv.put_complete"><code class="docutils literal notranslate"><span class="pre">put_complete</span></code></a></li>
<li><a class="reference internal" href="#pv.callbacks"><code class="docutils literal notranslate"><span class="pre">callbacks</span></code></a></li>
<li><a class="reference internal" href="#pv.connection_callbacks"><code class="docutils literal notranslate"><span class="pre">connection_callbacks</span></code></a></li>
<li><a class="reference internal" href="#pv.access_callbacks"><code class="docutils literal notranslate"><span class="pre">access_callbacks</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#string-representation-for-a-pv">String representation for a PV</a></li>
<li><a class="reference internal" href="#automatic-monitoring-of-a-pv">Automatic Monitoring of a PV</a></li>
<li><a class="reference internal" href="#user-supplied-callback-functions">User-supplied Callback functions</a></li>
<li><a class="reference internal" href="#user-supplied-connection-callback-functions">User-supplied Connection Callback functions</a></li>
<li><a class="reference internal" href="#user-supplied-access-rights-callback-functions">User-supplied Access Rights Callback functions</a></li>
<li><a class="reference internal" href="#put-with-wait-put-callbacks-and-put-complete">Put with wait, put callbacks, and  put_complete</a></li>
<li><a class="reference internal" href="#the-get-pv-function-and-pvcache-cache-of-pvs">The <code class="xref py py-func docutils literal notranslate"><span class="pre">get_pv()</span></code> function and <code class="xref py py-attr docutils literal notranslate"><span class="pre">_PVcache_</span></code> cache of PVs</a><ul>
<li><a class="reference internal" href="#pv.get_pv"><code class="docutils literal notranslate"><span class="pre">get_pv()</span></code></a></li>
<li><a class="reference internal" href="#pv._PVcache_"><code class="docutils literal notranslate"><span class="pre">_PVcache_</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#basic-use">Basic Use</a></li>
<li><a class="reference internal" href="#requests-including-metadata">Requests including Metadata</a></li>
<li><a class="reference internal" href="#example-of-using-info-and-more-properties-examples">Example of using info and more properties examples</a></li>
<li><a class="reference internal" href="#getting-a-string-value">Getting a string value</a></li>
<li><a class="reference internal" href="#example-of-put">Example of <code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a></li>
<li><a class="reference internal" href="#example-of-simple-callback">Example of simple callback</a></li>
<li><a class="reference internal" href="#example-of-connection-callback">Example of connection callback</a></li>
<li><a class="reference internal" href="#example-of-an-access-rights-callback">Example of an access rights callback</a></li>
<li><a class="reference internal" href="#example-of-a-property-callback">Example of a property callback</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="overview.html"
                          title="previous chapter">PyEpics Overview</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ca.html"
                          title="next chapter">ca: Low-level Channel Access module</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pv.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-pv">
<span id="pv-epics-process-variables"></span><span id="pv-label"></span><h1>PV: Epics Process Variables<a class="headerlink" href="#module-pv" title="Link to this heading">¶</a></h1>
<p>The <a class="reference internal" href="#module-pv" title="pv: PV objects for Epics Channel Access"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pv</span></code></a> module provides a higher-level class <a class="reference internal" href="#pv.PV" title="pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">pv.PV</span></code></a>, which
creates a <cite>PV</cite> object for an EPICS Process Variable.  A <cite>PV</cite> object has
both methods and attributes for accessing it’s properties.</p>
<section id="the-pv-class">
<h2>The <a class="reference internal" href="#pv.PV" title="pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a> class<a class="headerlink" href="#the-pv-class" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pv.PV">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">PV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">callback=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">form='time'</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">auto_monitor=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">count=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">connection_callback=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">connection_timeout=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">access_callback=None</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.PV" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">create</span> <span class="pre">a</span> <span class="pre">PV</span> <span class="pre">object</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">named</span> <span class="pre">Epics</span> <span class="pre">Process</span> <span class="pre">Variable.</span></span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvname</strong> – name of Epics Process Variable</p></li>
<li><p><strong>callback</strong> (<em>callable</em><em>, </em><em>tuple</em><em>, </em><em>list</em><em> or </em><em>None</em>) – user-defined callback function on changes to PV value or state.</p></li>
<li><p><strong>form</strong> (<em>string</em><em>, </em><em>one</em><em> of </em><em>(</em><em>'native'</em><em>,</em><em>'ctrl'</em><em>, or </em><em>'time'</em><em>)</em>) – which epics <em>data type</em> to use:  the ‘native’, ‘time’, or the ‘ctrl’ (Control) variant.</p></li>
<li><p><strong>verbose</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to print out debugging messages</p></li>
<li><p><strong>auto_monitor</strong> (<code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code>, or bitmask (see <a class="reference internal" href="#pv-automonitor-label"><span class="std std-ref">Automatic Monitoring of a PV</span></a>)) – whether to automatically monitor the PV for changes.</p></li>
<li><p><strong>count</strong> (<em>int</em>) – number of data elements to return by default (see <a class="reference internal" href="#pv-get-label"><span class="std std-ref">here</span></a>)</p></li>
<li><p><strong>connection_callback</strong> (callable or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – user-defined function called on changes to PV connection status.</p></li>
<li><p><strong>connection_timeout</strong> (float or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – time (in seconds) to wait for connection before giving up</p></li>
<li><p><strong>access_callback</strong> (callable or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – user-defined function called on changes to PV access rights</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>Once created, a PV should (barring any network issues) automatically
connect and be ready to use.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">epics</span> <span class="kn">import</span> <span class="n">PV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">PV</span><span class="p">(</span><span class="s1">&#39;XX:m1.VAL&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</pre></div>
</div>
<p>The <em>pvname</em> is required, and is the name of an existing Process Variable.</p>
<p>The <em>callback</em> parameter specifies one or more python methods to be called
on changes, as discussed in more detail at <a class="reference internal" href="#pv-callbacks-label"><span class="std std-ref">User-supplied Callback functions</span></a></p>
<p>The <em>connection_callback</em> parameter specifies a python method to be called
on changes to the connection status of the PV (that is, when it connects or
disconnects).  This is discussed in more detail at <a class="reference internal" href="#pv-connection-callbacks-label"><span class="std std-ref">User-supplied Connection Callback functions</span></a></p>
<p>The <em>form</em> parameter specifies which of the three variants ‘native’, ‘ctrl’
(Control) or ‘time’ (the default) to use for the PV.  The ‘native’ form
returns just the value, the ‘time’ form includes the timestamp from the
server the PV lives on, as well as status information.  The control form
includes several additional fields such as limits to the PV, which can be
useful in some cases.  Also note that the additional ‘ctrl’ value fields
(see the <a class="reference internal" href="ca.html#ctrlvars-table"><span class="std std-ref">Table of Control Attributes</span></a>) can be
obtained with <a class="reference internal" href="#pv.get_ctrlvars" title="pv.get_ctrlvars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_ctrlvars()</span></code></a> even for PVs of ‘native’ or ‘time’ form.</p>
<p>The <em>auto_monitor</em> parameter specifies whether the PV should be
automatically monitored.  See <a class="reference internal" href="#pv-automonitor-label"><span class="std std-ref">Automatic Monitoring of a PV</span></a> for a detailed
description of this.</p>
<p>The <em>verbose</em> parameter specifies more verbose output on changes, and is
intended for debugging purposes.</p>
<p>The <em>access_callback</em> parameter specifies a python method to be called on
changes to the access rights of the PV (read/write access changes). This
is discussed in more detail <a class="reference internal" href="#pv-access-rights-callback-label"><span class="std std-ref">here</span></a>.</p>
<section id="methods">
<h3>methods<a class="headerlink" href="#methods" title="Link to this heading">¶</a></h3>
<p>A <cite>PV</cite> has several methods for getting and setting its value and defining
callbacks to be executed when the PV changes.</p>
<dl class="py method" id="pv-get-label">
<dt class="sig sig-object py" id="pv.get">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">count=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">as_string=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">as_numpy=True</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">use_monitor=True</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">with_ctrlvars=False</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.get" title="Link to this definition">¶</a></dt>
<dd><p>get and return the current value of the PV</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>count</strong> (integer or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – maximum number of array elements to return</p></li>
<li><p><strong>as_string</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to return the string representation of the  value.</p></li>
<li><p><strong>as_numpy</strong> – whether to try to return a numpy array where appropriate.</p></li>
<li><p><strong>timeout</strong> (float or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – maximum time to wait for data before returning <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>use_monitor</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to rely on monitor callbacks or explicitly get value now.</p></li>
</ul>
</dd>
</dl>
<p>see <a class="reference internal" href="#pv-as-string-label"><span class="std std-ref">String representation for a PV</span></a> for details on how the string
representation is determined.</p>
<p>With the <em>as_numpy</em> option, an array PV (that is, a PV whose value has
more than one element) will be returned as a numpy array, provided the
numpy module is available.  See <a class="reference internal" href="arrays.html#arrays-large-label"><span class="std std-ref">Strategies for working with large arrays</span></a> for a
discussion of strategies for how to best deal with very large arrays.</p>
<p>The <em>use_monitor</em> option controls whether the most recent value from the automatic
monitoring will be used or whether the value will be explicitly asked
for right now.  Usually, you can rely on a PVs value being kept up to
date, and so the default here is <code class="docutils literal notranslate"><span class="pre">True</span></code>.  But, since network traffic
is not instantaneous and hard to predict, the value returned with
<cite>use_monitor=True</cite> may be out-of-date.</p>
<p>The <em>timeout</em> sets how long (in seconds) to wait for the value to be
sent.  This only applies with <cite>use_monitor=False</cite>, or if the PV is not
automatically monitored.   Otherwise, the most recently received value
will be sent immediately.</p>
<p>The <em>with_ctrlvars</em> option requests DBR_CTRL data, including control limits,
precision, and so on, in addition to the value normally returned.  This metadata
will be available by accessing various attributes such as
<code class="docutils literal notranslate"><span class="pre">lower_ctrl_limit</span></code>.</p>
<p>See <a class="reference internal" href="#pv-automonitor-label"><span class="std std-ref">Automatic Monitoring of a PV</span></a> for more on monitoring PVs and
<a class="reference internal" href="advanced.html#advanced-get-timeouts-label"><span class="std std-ref">The wait and timeout options for get(), ca.get_complete()</span></a> for more details on what happens when
a <a class="reference internal" href="#pv.get" title="pv.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">pv.get()</span></code></a> times out.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.get_with_metadata">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">get_with_metadata</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">form=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">count=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">as_string=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">as_numpy=True</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">use_monitor=True</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">with_ctrlvars=False</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.get_with_metadata" title="Link to this definition">¶</a></dt>
<dd><p>Returns a dictionary of the current value and associated metadata</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>form</strong> (<em>{'native'</em><em>, </em><em>'time'</em><em>, </em><em>'ctrl'</em><em>, </em><em>None}</em>) – EPICS <em>data type</em> to request:  the ‘native’, or the ‘ctrl’ (Control) or ‘time’ variant. Defaults to the PV instance attribute <code class="docutils literal notranslate"><span class="pre">form</span></code>.</p></li>
<li><p><strong>count</strong> (integer or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – maximum number of array elements to return</p></li>
<li><p><strong>as_string</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to return the string representation of the  value.</p></li>
<li><p><strong>as_numpy</strong> – whether to try to return a numpy array where appropriate.</p></li>
<li><p><strong>timeout</strong> (float or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – maximum time to wait for data before returning <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>use_monitor</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to rely on monitor callbacks or explicitly get value now.</p></li>
</ul>
</dd>
</dl>
<p>See <code class="docutils literal notranslate"><span class="pre">PV.get</span></code>, above, for further notes on each of these parameters.</p>
<p>Each request to EPICS can optionally contain additional metadata associated
with the value.  While <code class="docutils literal notranslate"><span class="pre">PV.get</span></code> updates the PV instance with any metadata,
<code class="docutils literal notranslate"><span class="pre">get_with_metadata</span></code> will return the requested metadata and value in a
dictionary.</p>
<p>The exception is when the PV is set to auto-monitor and the <cite>use_monitor</cite>
parameter here is set.  This means that both the value and metadata will
used the cached values instead of making a new request.  Because of this,
the metadata and value returned here will be a full dictionary of all known
metadata for the PV instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.put">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">wait=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout=30.0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">use_complete=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">callback=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">callback_data=None</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.put" title="Link to this definition">¶</a></dt>
<dd><p>set the PV value, optionally waiting to return until processing has
completed, or setting the <a class="reference internal" href="#pv.put_complete" title="pv.put_complete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">put_complete</span></code></a> to indicate complete-ness.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – value to set PV</p></li>
<li><p><strong>wait</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to wait for processing to complete (or time-out) before returning.</p></li>
<li><p><strong>timeout</strong> (<em>float</em>) – maximum time to wait for processing to complete before returning anyway.</p></li>
<li><p><strong>use_complete</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to use a built-in callback to set <a class="reference internal" href="#pv.put_complete" title="pv.put_complete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">put_complete</span></code></a>.</p></li>
<li><p><strong>callback</strong> (<code class="docutils literal notranslate"><span class="pre">None</span></code> or a valid python function) – user-supplied function to run when processing has completed.</p></li>
<li><p><strong>callback_data</strong> – extra data to pass on to a user-supplied callback function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>The <cite>wait</cite> and <cite>callback</cite> arguments, as well as the ‘use_complete’ / <a class="reference internal" href="#pv.put_complete" title="pv.put_complete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">put_complete</span></code></a>
attribute give a few options for knowing that a <a class="reference internal" href="#pv.put" title="pv.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a> has
completed.   See <a class="reference internal" href="#pv-putwait-label"><span class="std std-ref">Put with wait, put callbacks, and  put_complete</span></a> for more details.</p>
<dl class="py method" id="pv-get-ctrlvars-label">
<dt class="sig sig-object py" id="pv.get_ctrlvars">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">get_ctrlvars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.get_ctrlvars" title="Link to this definition">¶</a></dt>
<dd><p>returns a dictionary of the <strong>control values</strong> for the PV.  This
dictionary may have many members, depending on the data type of PV.  See
the <a class="reference internal" href="ca.html#ctrlvars-table"><span class="std std-ref">Table of Control Attributes</span></a>  for details.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.get_timevars">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">get_timevars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.get_timevars" title="Link to this definition">¶</a></dt>
<dd><p>returns a dictionary of the <strong>time values</strong> for the PV, which
include <cite>status</cite>, <cite>severity</cite>, and the <cite>timestamp</cite> from the CA
server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.poll">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">poll</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">evt=1.e-4</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">iot=1.0</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.poll" title="Link to this definition">¶</a></dt>
<dd><p>poll for changes.  This simply calls <a class="reference internal" href="ca.html#epics.ca.poll" title="epics.ca.poll"><code class="xref py py-meth docutils literal notranslate"><span class="pre">epics.ca.poll()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>evt</strong> (<em>float</em>) – time to pass to <a class="reference internal" href="ca.html#epics.ca.pend_event" title="epics.ca.pend_event"><code class="xref py py-meth docutils literal notranslate"><span class="pre">epics.ca.pend_event()</span></code></a></p></li>
<li><p><strong>iot</strong> (<em>float</em>) – time to pass to <a class="reference internal" href="ca.html#epics.ca.pend_io" title="epics.ca.pend_io"><code class="xref py py-meth docutils literal notranslate"><span class="pre">epics.ca.pend_io()</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.connect">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">timeout=None</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.connect" title="Link to this definition">¶</a></dt>
<dd><p>this explicitly connects a PV, and returns whether or not it has
successfully connected.  It is probably not that useful, as connection
should happen automatically. See <a class="reference internal" href="#pv.wait_for_connection" title="pv.wait_for_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_for_connection()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>float</em>) – maximum connection time, passed to <a class="reference internal" href="ca.html#epics.ca.connect_channel" title="epics.ca.connect_channel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">epics.ca.connect_channel()</span></code></a></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
<p>if timeout is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the PVs connection_timeout parameter will be used. If that is also <code class="docutils literal notranslate"><span class="pre">None</span></code>,
<code class="xref py py-data docutils literal notranslate"><span class="pre">episc.ca.DEFAULT_CONNECTION_TIMEOUT</span></code>  will be used.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.wait_for_connection">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">wait_for_connection</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">timeout=None</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.wait_for_connection" title="Link to this definition">¶</a></dt>
<dd><p>this waits until a PV is connected, or has timed-out waiting for a
connection.  Returns  whether the connection has occurred.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>float</em>) – maximum connection time.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
<p>if timeout is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the PVs connection_timeout parameter will be used. If that is also <code class="docutils literal notranslate"><span class="pre">None</span></code>,
<a class="reference internal" href="ca.html#epics.ca.DEFAULT_CONNECTION_TIMEOUT" title="epics.ca.DEFAULT_CONNECTION_TIMEOUT"><code class="xref py py-data docutils literal notranslate"><span class="pre">epics.ca.DEFAULT_CONNECTION_TIMEOUT</span></code></a>  will be used.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.disconnect">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>disconnect a PV, clearing all callbacks.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.reconnect">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">reconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.reconnect" title="Link to this definition">¶</a></dt>
<dd><p>reconnect (or try to) a disconnected PV.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.clear_auto_monitor">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">clear_auto_monitor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.clear_auto_monitor" title="Link to this definition">¶</a></dt>
<dd><p>turn off automatic monitoring of a PV.  Note that this will suspend
all event callbacks on a PV at the CA level by calling
<a class="reference internal" href="ca.html#epics.ca.clear_subscription" title="epics.ca.clear_subscription"><code class="xref py py-func docutils literal notranslate"><span class="pre">epics.ca.clear_subscription()</span></code></a>, but will not clear the list of PVs
callbacks.  This means that doing <a class="reference internal" href="#pv.reconnect" title="pv.reconnect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reconnect()</span></code></a> will resume
event processing including any callbacks or the PV.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.add_callback">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">add_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">callback=None[,</span> <span class="pre">index=None</span> <span class="pre">[,</span> <span class="pre">with_ctrlvars=True[,</span> <span class="pre">**kw]]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pv.add_callback" title="Link to this definition">¶</a></dt>
<dd><p>adds a user-defined callback routine to be run on each change event for
this PV.  Returns the integer <em>index</em>  for the callback.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback</strong> (<code class="docutils literal notranslate"><span class="pre">None</span></code> or callable) – user-supplied function to run when PV changes.</p></li>
<li><p><strong>index</strong> (<code class="docutils literal notranslate"><span class="pre">None</span></code> (integer will be produced) or immutable) – identifying key for this callback</p></li>
<li><p><strong>with_ctrlvars</strong> – whether to (try to) make sure that accurate  <code class="docutils literal notranslate"><span class="pre">control</span> <span class="pre">values</span></code> will be sent to the callback.</p></li>
<li><p><strong>kw</strong> – additional keyword/value arguments to pass to each execution of the callback.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>integer</p>
</dd>
</dl>
<p>Note that multiple callbacks can be defined, each having its own index
(a dictionary key, typically an integer).   When a PV changes, all the
defined callbacks will be executed.  They will be called in order (by
sorting  the keys of the <a class="reference internal" href="#pv.callbacks" title="pv.callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">callbacks</span></code></a> dictionary)</p>
<p>See also: <a class="reference internal" href="#pv.callbacks" title="pv.callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">callbacks</span></code></a>  attribute, <a class="reference internal" href="#pv-callbacks-label"><span class="std std-ref">User-supplied Callback functions</span></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.remove_callback">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">remove_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pv.remove_callback" title="Link to this definition">¶</a></dt>
<dd><p>remove a user-defined callback routine using supplied</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>index</strong> (<code class="docutils literal notranslate"><span class="pre">None</span></code> or integer) – index of user-supplied function, as returned by <a class="reference internal" href="#pv.add_callback" title="pv.add_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_callback()</span></code></a>,
and also to key for  this callback in the  <a class="reference internal" href="#pv.callbacks" title="pv.callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">callbacks</span></code></a> dictionary.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>integer</p>
</dd>
</dl>
<p>If only one callback is defined an index=``None``, this will clear the
only defined callback.</p>
<p>See also: <a class="reference internal" href="#pv.callbacks" title="pv.callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">callbacks</span></code></a>  attribute, <a class="reference internal" href="#pv-callbacks-label"><span class="std std-ref">User-supplied Callback functions</span></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.clear_callbacks">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">clear_callbacks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.clear_callbacks" title="Link to this definition">¶</a></dt>
<dd><p>remove all user-defined callback routine.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.run_callbacks">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">run_callbacks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.run_callbacks" title="Link to this definition">¶</a></dt>
<dd><p>execute all user-defined callbacks right now, even if the PV has not
changed.  Useful for debugging!</p>
<p>See also: <a class="reference internal" href="#pv.callbacks" title="pv.callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">callbacks</span></code></a>  attribute, <a class="reference internal" href="#pv-callbacks-label"><span class="std std-ref">User-supplied Callback functions</span></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.run_callback">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">run_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pv.run_callback" title="Link to this definition">¶</a></dt>
<dd><p>execute a particular user-defined callback right now, even if the PV
has not changed.  Useful for debugging!</p>
<p>See also: <a class="reference internal" href="#pv.callbacks" title="pv.callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">callbacks</span></code></a>  attribute, <a class="reference internal" href="#pv-callbacks-label"><span class="std std-ref">User-supplied Callback functions</span></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pv.force_read_access_rights">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">force_read_access_rights</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.force_read_access_rights" title="Link to this definition">¶</a></dt>
<dd><p>force a read of the access rights for a PV.  Normally, a PV will
have access rights determined automatically and subscribe to
changes in access rights.  But sometimes (especially 64-bit
Windows), the automatically reported values are wrong.  This
methods will explicitly read the access rights.</p>
</dd></dl>

</section>
<section id="attributes">
<h3>attributes<a class="headerlink" href="#attributes" title="Link to this heading">¶</a></h3>
<p>A PV object has many attributes, each associated with some property of the
underlying PV: its <em>value</em>, <em>host</em>, <em>count</em>, and so on.  For properties
that can change, the PV attribute will hold the latest value for the
corresponding property,  Most attributes are <strong>read-only</strong>, and cannot be
assigned to.  The exception to this rule is the <a class="reference internal" href="#pv.value" title="pv.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a> attribute.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pv.value">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#pv.value" title="Link to this definition">¶</a></dt>
<dd><p>The current value of the PV.</p>
<p><strong>Note</strong>: The <a class="reference internal" href="#pv.value" title="pv.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a> attribute can be assigned to.
When read, the latest value will be returned, even if that means a
<a class="reference internal" href="#pv.get" title="pv.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> needs to be called.</p>
<p>Assigning to <a class="reference internal" href="#pv.value" title="pv.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a> is equivalent to setting the value with the
<a class="reference internal" href="#pv.put" title="pv.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a> method.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">epics</span> <span class="kn">import</span> <span class="n">PV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span> <span class="o">=</span> <span class="n">PV</span><span class="p">(</span><span class="s1">&#39;xxx.VAL&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">1.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">2.00</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.char_value">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">char_value</span></span><a class="headerlink" href="#pv.char_value" title="Link to this definition">¶</a></dt>
<dd><p>The string representation of the string, as described in <a class="reference internal" href="#pv.get" title="pv.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.status">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">status</span></span><a class="headerlink" href="#pv.status" title="Link to this definition">¶</a></dt>
<dd><p>The PV status, which will be 0 for a normal, connected PV.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.type">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#pv.type" title="Link to this definition">¶</a></dt>
<dd><p>string describing data type of PV, such as <cite>double</cite>, <cite>float</cite>, <cite>enum</cite>, <cite>string</cite>,
<cite>int</cite>,  <cite>long</cite>, <cite>char</cite>, or one of the <cite>ctrl</cite> or <cite>time</cite> variants of these, which
will be named <cite>ctrl_double</cite>, <cite>time_enum</cite>, and so on.  See the
<a class="reference internal" href="ca.html#dbrtype-table"><span class="std std-ref">Table of DBR Types</span></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.ftype">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">ftype</span></span><a class="headerlink" href="#pv.ftype" title="Link to this definition">¶</a></dt>
<dd><p>The integer value (from the underlying C library) indicating the PV data
type according to <a class="reference internal" href="ca.html#dbrtype-table"><span class="std std-ref">Table of DBR Types</span></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.host">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">host</span></span><a class="headerlink" href="#pv.host" title="Link to this definition">¶</a></dt>
<dd><p>string of host machine provide this PV.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.count">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">count</span></span><a class="headerlink" href="#pv.count" title="Link to this definition">¶</a></dt>
<dd><p>number of data elements in a PV.  1 except for waveform PVs, where it
gives the number of elements in the waveform. For recent versions of
Epics Base (3.14.11 and later?), this gives the <cite>.NORD</cite> field, which
gives the number of elements last put into the PV and which may be less
than the maximum number allowed (see <cite>nelm</cite> below).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.nelm">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">nelm</span></span><a class="headerlink" href="#pv.nelm" title="Link to this definition">¶</a></dt>
<dd><p>number of data elements in a PV.  1 except for waveform PVs where it
gives the maximum number of elements in the waveform. For recent
versions of Epics Base (3.14.11 and later?), this gives the <cite>.NELM</cite>
parameter.  See also the <cite>count</cite> attribute above.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.read_access">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">read_access</span></span><a class="headerlink" href="#pv.read_access" title="Link to this definition">¶</a></dt>
<dd><p>Boolean (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) for whether PV is readable</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.write_access">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">write_access</span></span><a class="headerlink" href="#pv.write_access" title="Link to this definition">¶</a></dt>
<dd><p>Boolean (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) for whether PV is writable</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.access">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">access</span></span><a class="headerlink" href="#pv.access" title="Link to this definition">¶</a></dt>
<dd><p>string describing read/write access.  One of
‘read/write’,’read-only’,’write-only’, ‘no access’.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.severity">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">severity</span></span><a class="headerlink" href="#pv.severity" title="Link to this definition">¶</a></dt>
<dd><p>severity value of PV. Usually 0 for PVs that are not in an alarm
condition.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.timestamp">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#pv.timestamp" title="Link to this definition">¶</a></dt>
<dd><p>floating point timestamp (relative to the POSIX time origin, not the
EPICS time origin) of the last event seen for this PV.  Note that this
is will contain the timestamp from the Epics server if the PV object was
created with the <code class="docutils literal notranslate"><span class="pre">form='time'</span></code> option.  Otherwise, the timestamp will
be set to time according to the client, indicating when the data arrive
from the server.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.posixseconds">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">posixseconds</span></span><a class="headerlink" href="#pv.posixseconds" title="Link to this definition">¶</a></dt>
<dd><p>Integer number of seconds (relative to the POSIX time origin, not the
EPICS time origin) of the last event seen for this PV.  This will be set
only if the PV object was created with the <code class="docutils literal notranslate"><span class="pre">form='time'</span></code> option, and
will reflect the timestamp from the server.  Otherwise, this value will
be 0 which can be used to signal that the <cite>timestamp</cite> attribute is from
the client.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.nanoseconds">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">nanoseconds</span></span><a class="headerlink" href="#pv.nanoseconds" title="Link to this definition">¶</a></dt>
<dd><p>Integer number of nanoseconds for the last event seen for this PV.  This
will be set only if the PV object was created with the <code class="docutils literal notranslate"><span class="pre">form='time'</span></code>
option, and will give higher time resolution than the <cite>timestamp</cite>
attribute.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.precision">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">precision</span></span><a class="headerlink" href="#pv.precision" title="Link to this definition">¶</a></dt>
<dd><p>number of decimal places of precision to use for float and double PVs</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.units">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">units</span></span><a class="headerlink" href="#pv.units" title="Link to this definition">¶</a></dt>
<dd><p>string of engineering units for PV</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.enum_strs">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">enum_strs</span></span><a class="headerlink" href="#pv.enum_strs" title="Link to this definition">¶</a></dt>
<dd><p>a list of strings for the enumeration states  of this PV (for enum PVs)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.info">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">info</span></span><a class="headerlink" href="#pv.info" title="Link to this definition">¶</a></dt>
<dd><p>a string paragraph (ie, including newlines) showing much of the
information about the PV.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.upper_disp_limit">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">upper_disp_limit</span></span><a class="headerlink" href="#pv.upper_disp_limit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.lower_disp_limit">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">lower_disp_limit</span></span><a class="headerlink" href="#pv.lower_disp_limit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.upper_alarm_limit">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">upper_alarm_limit</span></span><a class="headerlink" href="#pv.upper_alarm_limit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.lower_alarm_limit">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">lower_alarm_limit</span></span><a class="headerlink" href="#pv.lower_alarm_limit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.lower_warning_limit">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">lower_warning_limit</span></span><a class="headerlink" href="#pv.lower_warning_limit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.upper_warning_limit">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">upper_warning_limit</span></span><a class="headerlink" href="#pv.upper_warning_limit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.upper_ctrl_limit">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">upper_ctrl_limit</span></span><a class="headerlink" href="#pv.upper_ctrl_limit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.lower_ctrl_limit">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">lower_ctrl_limit</span></span><a class="headerlink" href="#pv.lower_ctrl_limit" title="Link to this definition">¶</a></dt>
<dd><p>These are all the various kinds of limits for a PV.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.put_complete">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">put_complete</span></span><a class="headerlink" href="#pv.put_complete" title="Link to this definition">¶</a></dt>
<dd><p>a Boolean (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) value for whether the most recent
<a class="reference internal" href="#pv.put" title="pv.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a>  has completed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.callbacks">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">callbacks</span></span><a class="headerlink" href="#pv.callbacks" title="Link to this definition">¶</a></dt>
<dd><p>a dictionary of currently defined callbacks, to be run on changes to the
PV.  This dictionary has integer keys (generally in increasing order of
when they were defined) which sets which order for executing the
callbacks.  The values of this dictionary are tuples of <cite>(callback,
keyword_arguments)</cite>.</p>
<dl class="simple">
<dt><strong>Note</strong>: The <a class="reference internal" href="#pv.callbacks" title="pv.callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">callbacks</span></code></a> attribute can be assigned to or</dt><dd><p>manipulated directly.  This is not recommended. Use the
methods <a class="reference internal" href="#pv.add_callback" title="pv.add_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_callback()</span></code></a>, <a class="reference internal" href="#pv.remove_callback" title="pv.remove_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove_callback()</span></code></a>, and
<a class="reference internal" href="#pv.clear_callbacks" title="pv.clear_callbacks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear_callbacks()</span></code></a> instead of altering this dictionary directly.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.connection_callbacks">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">connection_callbacks</span></span><a class="headerlink" href="#pv.connection_callbacks" title="Link to this definition">¶</a></dt>
<dd><p>a simple list of connection callbacks: functions to be run when the
connection status of the PV changes. See
<a class="reference internal" href="#pv-connection-callbacks-label"><span class="std std-ref">User-supplied Connection Callback functions</span></a> for more details.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv.access_callbacks">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">access_callbacks</span></span><a class="headerlink" href="#pv.access_callbacks" title="Link to this definition">¶</a></dt>
<dd><p>an <code class="xref py py-attr docutils literal notranslate"><span class="pre">list</span></code> of access callbacks: functions to be run when the
access rights of the PV changes. See
<a class="reference internal" href="#pv-access-rights-callback-label"><span class="std std-ref">User-supplied Access Rights Callback functions</span></a> for more details.</p>
</dd></dl>

</section>
</section>
<section id="string-representation-for-a-pv">
<span id="pv-as-string-label"></span><h2>String representation for a PV<a class="headerlink" href="#string-representation-for-a-pv" title="Link to this heading">¶</a></h2>
<p>The string representation for a <cite>PV</cite>, as returned either with the
<em>as_string</em> argument to <a class="reference internal" href="ca.html#epics.ca.get" title="epics.ca.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">epics.ca.get()</span></code></a> or from the <a class="reference internal" href="#pv.char_value" title="pv.char_value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">char_value</span></code></a>
attribute (they are equivalent) needs some further explanation.</p>
<p>The value of the string representation (hereafter, the <a class="reference internal" href="#pv.char_value" title="pv.char_value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">char_value</span></code></a>),
will depend on the native type and count of a <cite>PV</cite>.
<a class="reference internal" href="#charvalue-table"><span class="std std-ref">Table of String Representations</span></a></p>
<blockquote id="charvalue-table">
<div><p>Table of String Representations:  How raw data <a class="reference internal" href="#pv.value" title="pv.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a> is mapped
to <a class="reference internal" href="#pv.char_value" title="pv.char_value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">char_value</span></code></a> for different native data types.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><em>data types</em></p></th>
<th class="head"><p><em>count</em></p></th>
<th class="head"><p><em>char_value</em></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>string</p></td>
<td><p>1</p></td>
<td><p>= value</p></td>
</tr>
<tr class="row-odd"><td><p>char</p></td>
<td><p>1</p></td>
<td><p>= value</p></td>
</tr>
<tr class="row-even"><td><p>short</p></td>
<td><p>1</p></td>
<td><p>= str(value)</p></td>
</tr>
<tr class="row-odd"><td><p>long</p></td>
<td><p>1</p></td>
<td><p>= str(value)</p></td>
</tr>
<tr class="row-even"><td><p>enum</p></td>
<td><p>1</p></td>
<td><p>= enum_str[value]</p></td>
</tr>
<tr class="row-odd"><td><p>double</p></td>
<td><p>1</p></td>
<td><p>= (“%%.%if” % (precision)) % value</p></td>
</tr>
<tr class="row-even"><td><p>float</p></td>
<td><p>1</p></td>
<td><p>= (“%%.%if” % (precision)) % value</p></td>
</tr>
<tr class="row-odd"><td><p>char</p></td>
<td><p>&gt; 1</p></td>
<td><p>= long string from bytes in array</p></td>
</tr>
<tr class="row-even"><td><p>all others</p></td>
<td><p>&gt; 1</p></td>
<td><p>= &lt;array size=*count*, type=*type*&gt;</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<p>For double/float values with large exponents, the formatting will be
<cite>(“%%.%ig” % (precision)) % value</cite>.  For character waveforms (<em>char</em> data
with <em>count</em> &gt; 1), the <a class="reference internal" href="#pv.char_value" title="pv.char_value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">char_value</span></code></a> will be set according to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">firstnull</span>  <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">firstnull</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="n">firstnull</span><span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">char_value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">val</span><span class="p">[:</span><span class="n">firstnull</span><span class="p">])</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="automatic-monitoring-of-a-pv">
<span id="pv-automonitor-label"></span><h2>Automatic Monitoring of a PV<a class="headerlink" href="#automatic-monitoring-of-a-pv" title="Link to this heading">¶</a></h2>
<p>When creating a PV, the <em>auto_monitor</em> parameter specifies whether the PV
should be automatically monitored or not.  Automatic monitoring means that
an internal callback will be registered for changes.  Any callbacks defined
by the user will be called by this internal callback when changes occur.</p>
<p>For most scalar-value PVs, this automatic monitoring is desirable, as the
PV will see all changes (and run callbacks) without any additional
interaction from the user. The PV’s value will always be up-to-date and no
unnecessary network traffic is needed.</p>
<p>Possible values for <code class="xref py py-attr docutils literal notranslate"><span class="pre">auto_monitor</span></code> are:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">False</span></code></dt><dd><p>For some PVs, especially those that change much more rapidly than you care
about or those that contain large arrays as values, auto_monitoring can add
network traffic that you don’t need.  For these, you may wish to create
your PVs with <em>auto_monitor=False</em>.  When you do this, you will need to
make calls to <a class="reference internal" href="#pv.get" title="pv.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> to explicitly get the latest value.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">None</span></code></dt><dd><p>The default value for <em>auto_monitor</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, and is set to
<code class="docutils literal notranslate"><span class="pre">True</span></code> if the element count for the PV is smaller than
<a class="reference internal" href="ca.html#epics.ca.AUTOMONITOR_MAXLENGTH" title="epics.ca.AUTOMONITOR_MAXLENGTH"><code class="xref py py-data docutils literal notranslate"><span class="pre">epics.ca.AUTOMONITOR_MAXLENGTH</span></code></a> (default of 65536).  To suppress
monitoring of PVs with fewer array values, you will have to explicitly
turn <em>auto_monitor</em> to <code class="docutils literal notranslate"><span class="pre">False</span></code>. For waveform arrays with more elements,
automatic monitoring will not be done unless you explicitly set
<em>auto_monitor=True</em>, or to an explicit mask.  See
<a class="reference internal" href="arrays.html#arrays-large-label"><span class="std std-ref">Strategies for working with large arrays</span></a> for more details.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">True</span></code></dt><dd><p>When <em>auto_monitor</em> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the value will be monitored using
the default subscription mask set at <a class="reference internal" href="ca.html#epics.ca.DEFAULT_SUBSCRIPTION_MASK" title="epics.ca.DEFAULT_SUBSCRIPTION_MASK"><code class="xref py py-data docutils literal notranslate"><span class="pre">epics.ca.DEFAULT_SUBSCRIPTION_MASK</span></code></a>.</p>
<p>This mask determines which kinds of changes cause the PV to update. By
default, the subscription updates when the PV value changes by more
than the monitor deadband, or when the PV alarm status changes. This
behavior is the same as the default in EPICS’ <em>camonitor</em> tool.</p>
</dd>
<dt><em>Mask</em></dt><dd><p>It is also possible to request an explicit type of CA subscription by
setting <em>auto_monitor</em> to a numeric subscription mask made up of
dbr.DBE_ALARM, dbr.DBE_LOG and/or dbr.DBE_VALUE. This mask will be
passed directly to <a class="reference internal" href="ca.html#epics.ca.create_subscription" title="epics.ca.create_subscription"><code class="xref py py-meth docutils literal notranslate"><span class="pre">epics.ca.create_subscription()</span></code></a> An example would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pv1</span> <span class="o">=</span> <span class="n">PV</span><span class="p">(</span><span class="s1">&#39;AAA&#39;</span><span class="p">,</span> <span class="n">auto_monitor</span><span class="o">=</span><span class="n">dbr</span><span class="o">.</span><span class="n">DBE_VALUE</span><span class="p">)</span>
<span class="n">pv2</span> <span class="o">=</span> <span class="n">PV</span><span class="p">(</span><span class="s1">&#39;BBB&#39;</span><span class="p">,</span> <span class="n">auto_monitor</span><span class="o">=</span><span class="n">dbr</span><span class="o">.</span><span class="n">DBE_VALUE</span><span class="o">|</span><span class="n">dbr</span><span class="o">.</span><span class="n">DBE_ALARM</span><span class="p">)</span>
<span class="n">pv3</span> <span class="o">=</span> <span class="n">PV</span><span class="p">(</span><span class="s1">&#39;CCC&#39;</span><span class="p">,</span> <span class="n">auto_monitor</span><span class="o">=</span><span class="n">dbr</span><span class="o">.</span><span class="n">DBE_VALUE</span><span class="o">|</span><span class="n">dbr</span><span class="o">.</span><span class="n">DBE_ALARM</span><span class="o">|</span><span class="n">dbr</span><span class="o">.</span><span class="n">DBE_LOG</span><span class="p">)</span>
</pre></div>
</div>
<p>which will generate callbacks for pv1 only when the value of ‘AAA’
changes, while pv2 will receive callbacks if the value or alarm state of
‘BBB’ changes, and pv3 will receive callbacks for all changes to ‘CCC’.
Note that these dbr.DBE_**** constants are ORed together as a bitmask.</p>
</dd>
</dl>
</section>
<section id="user-supplied-callback-functions">
<span id="pv-callbacks-label"></span><h2>User-supplied Callback functions<a class="headerlink" href="#user-supplied-callback-functions" title="Link to this heading">¶</a></h2>
<p>This section describes user-defined functions that are called when the
value of a PV changes.  These callback functions are useful as they allow
you to be notified of changes without having to continually ask for a PVs
current value.  Much of this information is similar to that in
<a class="reference internal" href="ca.html#ca-callbacks-label"><span class="std std-ref">User-supplied Callback functions</span></a> for the <code class="xref py py-mod docutils literal notranslate"><span class="pre">ca</span></code> module, though there are some
important enhancements to callbacks on <cite>PV</cite> objects.</p>
<p>You can define more than one callback function per PV to be run on value
changes.  These functions can be specified when creating a PV, with the
<em>callback</em> argument which can take either a single callback function or a
list or tuple of callback functions.  After a PV has been created, you can
add callback functions with <a class="reference internal" href="#pv.add_callback" title="pv.add_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_callback()</span></code></a>, remove them with
<a class="reference internal" href="#pv.remove_callback" title="pv.remove_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove_callback()</span></code></a>, and explicitly run them with <a class="reference internal" href="#pv.run_callback" title="pv.run_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_callback()</span></code></a>.
Each callback has an internal unique <em>index</em> (a small integer number) that
can be used for specifying which one to add, remove, and run.</p>
<p>When defining a callback function to be run on changes to a PV, it is
important to know two things:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>how your function will be called.</p></li>
<li><p>what is permissible to do inside your callback function.</p></li>
</ol>
</div></blockquote>
<p>Callback functions will be called with several keyword arguments.  You
should be prepared to have them passed to your function, and should always
include <cite>**kw</cite> to catch all arguments.  Your callback will be sent the
following keyword parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>pvname</cite>: the name of the pv</p></li>
<li><p><cite>value</cite>: the latest value</p></li>
<li><p><cite>char_value</cite>: string representation of value</p></li>
<li><p><cite>count</cite>: the number of data elements</p></li>
<li><p><cite>ftype</cite>: the numerical CA type indicating the data type</p></li>
<li><p><cite>type</cite>: the python type for the data</p></li>
<li><p><cite>status</cite>: the status of the PV (0 for OK)</p></li>
<li><p><cite>precision</cite>: number of decimal places of precision for floating point values</p></li>
<li><p><cite>units</cite>:  string for PV units</p></li>
<li><p><cite>severity</cite>: PV severity</p></li>
<li><p><cite>timestamp</cite>: timestamp from CA server.</p></li>
<li><p><cite>read_access</cite>: read access (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><cite>write_access</cite>: write access (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><cite>access</cite>: string description of  read- and write-access</p></li>
<li><p><cite>host</cite>: host machine and CA port serving PV</p></li>
<li><p><cite>enum_strs</cite>: the list of enumeration strings</p></li>
<li><p><cite>upper_disp_limit</cite>: upper display limit</p></li>
<li><p><cite>lower_disp_limit</cite>:  lower display limit</p></li>
<li><p><cite>upper_alarm_limit</cite>:  upper alarm limit</p></li>
<li><p><cite>lower_alarm_limit</cite>:  lower alarm limit</p></li>
<li><p><cite>upper_warning_limit</cite>:  upper warning limit</p></li>
<li><p><cite>lower_warning_limit</cite>:  lower warning limit</p></li>
<li><p><cite>upper_ctrl_limit</cite>:  upper control limit</p></li>
<li><p><cite>lower_ctrl_limit</cite>:  lower control limit</p></li>
<li><p><cite>chid</cite>:  integer channel ID</p></li>
<li><dl class="simple">
<dt><cite>cb_info</cite>:  (index, self) tuple containing callback ID</dt><dd><p>and the PV object</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Some of these may not be directly applicable to all PV data types, and some
values may be <code class="docutils literal notranslate"><span class="pre">None</span></code> if the control parameters have not yet been fetched with
<a class="reference internal" href="#pv.get_ctrlvars" title="pv.get_ctrlvars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_ctrlvars()</span></code></a>.</p>
<p>It is important to keep in mind that the callback function will be run
<em>inside</em> a CA function, and cannot reliably make any other CA calls.  It is
helpful to think “this all happens inside of a <code class="xref py py-func docutils literal notranslate"><span class="pre">pend_event()</span></code> call”,
and in an epics thread that may or may not be the main thread of your
program.  It is advisable to keep the callback functions short and not
resource-intensive.  Consider strategies which use the callback only to
record that a change has occurred and then act on that change later –
perhaps in a separate thread, perhaps after <code class="xref py py-func docutils literal notranslate"><span class="pre">pend_event()</span></code> has
completed.</p>
<p>The <cite>cb_info</cite> parameter supplied to the callback needs special attention,
as it is the only non-Epics information passed.   The <cite>cb_info</cite> parameter
will be a tuple containing (<code class="xref py py-attr docutils literal notranslate"><span class="pre">index</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">self</span></code>) where
<code class="xref py py-attr docutils literal notranslate"><span class="pre">index</span></code> is the key for the <a class="reference internal" href="#pv.callbacks" title="pv.callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">callbacks</span></code></a> dictionary for the PV
and <code class="xref py py-attr docutils literal notranslate"><span class="pre">self</span></code> <em>is</em> PV object.  A principle use of this tuple is to
<strong>remove the current callback</strong>  if an error happens, as for example in GUI
code if the widget that the callback is meant to update disappears.</p>
</section>
<section id="user-supplied-connection-callback-functions">
<span id="pv-connection-callbacks-label"></span><h2>User-supplied Connection Callback functions<a class="headerlink" href="#user-supplied-connection-callback-functions" title="Link to this heading">¶</a></h2>
<p>A <em>connection</em> callback is a user-defined function that is called when the
connection status of a PV changes – that is, when a PV initially
connects, disconnects or reconnects due to the process serving the PV going
away, or loss of network connection.  A connection callback can be
specified when a PV is created, or can be added by appending to the
<a class="reference internal" href="#pv.connection_callbacks" title="pv.connection_callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">connection_callbacks</span></code></a> list.  If there is more than one connection
callback defined, they will all be run when the connection state changes.</p>
<p>A connection callback should be prepared to receive the following keyword arguments:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>pvname</cite>: the name of the pv</p></li>
<li><p><cite>conn</cite>: the connection status</p></li>
</ul>
</div></blockquote>
<p>where <em>conn</em> will be either <code class="docutils literal notranslate"><span class="pre">True`</span> <span class="pre">or</span> <span class="pre">``False</span></code>, specifying whether the PV is
now connected.   A simple example is given below.</p>
</section>
<section id="user-supplied-access-rights-callback-functions">
<span id="pv-access-rights-callback-label"></span><h2>User-supplied Access Rights Callback functions<a class="headerlink" href="#user-supplied-access-rights-callback-functions" title="Link to this heading">¶</a></h2>
<p>An <em>access rights</em> callback is a user-defined function that is called when the
access rights - read/write permissions - of a PV undergo changes. The callback
will be invoked upon successful initialization and at all events that change
a PV’s access rights, including disconnection and reconnection events.
An <em>access rights</em> callback can be specified when a PV is created, or can be
added by appending to the <a class="reference internal" href="#pv.access_callbacks" title="pv.access_callbacks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">access_callbacks</span></code></a> list of the PV object.
If there are multiple access rights callbacks defined for a PV, they will all
be run on access rights events.</p>
</section>
<section id="put-with-wait-put-callbacks-and-put-complete">
<span id="pv-putwait-label"></span><h2>Put with wait, put callbacks, and  put_complete<a class="headerlink" href="#put-with-wait-put-callbacks-and-put-complete" title="Link to this heading">¶</a></h2>
<p>Some EPICS records take a significant amount of time to fully process, and
sometimes you want to wait until the processing completes before going on.
There are a few ways to accomplish this.  First, one can simply wait until
the processing is done:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">epics</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;XXX&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will hang until the processing of the PV completes (motor moving, etc)
before printing ‘Done’.   You can also specify a maximum time to wait – a
<em>timeout</em> (in seconds):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<p>which will wait up to 30 seconds.  For the pedantic, this timeout should
not be used as an accurate clock – the actual wait time may be slightly
longer.</p>
<p>A second method is to use the ‘use_complete’ option and watch for the
<a class="reference internal" href="#pv.put_complete" title="pv.put_complete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">put_complete</span></code></a> attribute to become <code class="docutils literal notranslate"><span class="pre">True</span></code> after a <a class="reference internal" href="#pv.put" title="pv.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a>.  This is
somewhat more flexible than using <cite>wait=True</cite> as above, because you can more
carefully control how often you look for a <a class="reference internal" href="#pv.put" title="pv.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a> to complete, and
what to do in the interim.  A simple example would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">use_complete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">waiting</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">while</span> <span class="n">waiting</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
    <span class="n">waiting</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">put_complete</span>
</pre></div>
</div>
<p>An additional advantage of this approach is that you can easily wait for
multiple PVs to complete with python’s built-in <em>all</em> function, as with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pvgroup</span> <span class="o">=</span> <span class="p">(</span><span class="n">epics</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;XXX&#39;</span><span class="p">),</span> <span class="n">epics</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;YYY&#39;</span><span class="p">),</span> <span class="n">epics</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;ZZZ&#39;</span><span class="p">))</span>
<span class="n">newvals</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span>  <span class="mf">3.0</span><span class="p">)</span>
<span class="k">for</span> <span class="n">pv</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pvgroup</span><span class="p">,</span> <span class="n">newvals</span><span class="p">):</span>
    <span class="n">pv</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">use_complete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">waiting</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">while</span> <span class="n">waiting</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
    <span class="n">waiting</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">pv</span><span class="o">.</span><span class="n">put_complete</span> <span class="k">for</span> <span class="n">pv</span> <span class="ow">in</span> <span class="n">pvgroup</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All puts are done!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For maximum flexibility, one can all define a <em>put callback</em>, a function to
be run when the <a class="reference internal" href="#pv.put" title="pv.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a> has completed.   This function requires a
<em>pvname</em> keyword argument, but will receive no others, unless you pass in
data with the <em>callback_data</em> argument (which should be dict-like) to
<a class="reference internal" href="#pv.put" title="pv.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a>.   A simple example would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pv</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;XXX&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">onPutComplete</span><span class="p">(</span><span class="n">pvname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Put done for </span><span class="si">{</span><span class="n">pvname</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">pv</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">onPutComplete</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="the-get-pv-function-and-pvcache-cache-of-pvs">
<span id="pv-cache-label"></span><h2>The <a class="reference internal" href="#pv.get_pv" title="pv.get_pv"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_pv()</span></code></a> function and <a class="reference internal" href="#pv._PVcache_" title="pv._PVcache_"><code class="xref py py-attr docutils literal notranslate"><span class="pre">_PVcache_</span></code></a> cache of PVs<a class="headerlink" href="#the-get-pv-function-and-pvcache-cache-of-pvs" title="Link to this heading">¶</a></h2>
<p>As mentioned in the previous chapter, a cache of PVs is maintained for each
process using pyepics.  When using <a class="reference internal" href="overview.html#epics.caget" title="epics.caget"><code class="xref py py-func docutils literal notranslate"><span class="pre">epics.caget()</span></code></a>, <a class="reference internal" href="overview.html#epics.caput" title="epics.caput"><code class="xref py py-func docutils literal notranslate"><span class="pre">epics.caput()</span></code></a>
and so forth, or when creating a <a class="reference internal" href="#pv.PV" title="pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a> directly, the corresponding PV
is kept in a global cache, held in <a class="reference internal" href="#pv._PVcache_" title="pv._PVcache_"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pv._PVcache_</span></code></a>.</p>
<p>The function <a class="reference internal" href="#pv.get_pv" title="pv.get_pv"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_pv()</span></code></a> will retrieve the named PV from this cache, or
create a new <a class="reference internal" href="#pv.PV" title="pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a> if one is not found.  In long-running or complex
processes, it is not unusual to access a particular PV many times, perhaps
calling a function that creates a PV but only keeping that PV object for
the life of the function.  Using <a class="reference internal" href="#pv.get_pv" title="pv.get_pv"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_pv()</span></code></a> instead of creating a
<a class="reference internal" href="#pv.PV" title="pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a> can improve performance (the PV is already connected) and is
highly recommended.</p>
<dl class="py function">
<dt class="sig sig-object py" id="pv.get_pv">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">get_pv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pvname</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">form='time'</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">connect=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">timeout=5</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">context=None</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">**kws</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pv.get_pv" title="Link to this definition">¶</a></dt>
<dd><p>retrieves a PV from <code class="xref py py-attr docutils literal notranslate"><span class="pre">_PVcache</span></code> or creates and returns a new PV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pvname</strong> – name of Epics Process Variable</p></li>
<li><p><strong>form</strong> (<em>string</em><em>, </em><em>one</em><em> of </em><em>(</em><em>'native'</em><em>,</em><em>'ctrl'</em><em>, or </em><em>'time'</em><em>)</em>) – which epics <em>data type</em> to use:  the ‘native’ , or the ‘ctrl’ (Control) or ‘time’ variant.</p></li>
<li><p><strong>connect</strong> (<code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>) – whether to wait for the PV to connect.</p></li>
<li><p><strong>timeout</strong> (float or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – maximum time to wait (in seconds) for value before returning None.</p></li>
<li><p><strong>context</strong> (integer or  <code class="docutils literal notranslate"><span class="pre">None</span></code> (default)) – integer threading context.</p></li>
</ul>
</dd>
</dl>
<p>Additional keywords are passed directly to <a class="reference internal" href="#pv.PV" title="pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pv._PVcache_">
<span class="sig-prename descclassname"><span class="pre">pv.</span></span><span class="sig-name descname"><span class="pre">_PVcache_</span></span><a class="headerlink" href="#pv._PVcache_" title="Link to this definition">¶</a></dt>
<dd><p>A cache of <a class="reference internal" href="#pv.PV" title="pv.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a> objects for the process.</p>
</dd></dl>

</section>
<section id="examples">
<span id="pv-examples-label"></span><h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<p>Some simple examples using PVs follow.</p>
<section id="basic-use">
<h3>Basic Use<a class="headerlink" href="#basic-use" title="Link to this heading">¶</a></h3>
<p>The simplest approach is to simply create a PV and use its <a class="reference internal" href="#pv.value" title="pv.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a>
attribute:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">epics</span> <span class="kn">import</span> <span class="n">PV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span> <span class="o">=</span> <span class="n">PV</span><span class="p">(</span><span class="s1">&#39;xxx.VAL&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="go">1.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">2.00</span>
</pre></div>
</div>
<p>The <em>print p1.value</em> line automatically fetches the current PV value.  The
<em>p1.value = 2.00</em> line does a <a class="reference internal" href="#pv.put" title="pv.put"><code class="xref py py-func docutils literal notranslate"><span class="pre">put()</span></code></a> to set the value, causing any
necessary processing over the network.</p>
<p>The above example is equivalent to</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">epics</span> <span class="kn">import</span> <span class="n">PV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span> <span class="o">=</span> <span class="n">PV</span><span class="p">(</span><span class="s1">&#39;xxx.VAL&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="go">1.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="mf">2.00</span><span class="p">)</span>
</pre></div>
</div>
<p>To get a string representation of the value, you can use either</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">&#39;1.000&#39;</span>
</pre></div>
</div>
<p>or, equivalently</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">char_value</span><span class="p">)</span>
<span class="go">&#39;1.000&#39;</span>
</pre></div>
</div>
</section>
<section id="requests-including-metadata">
<h3>Requests including Metadata<a class="headerlink" href="#requests-including-metadata" title="Link to this heading">¶</a></h3>
<p>It is also possible to get the metadata associated with a single Channel Access
request using <a class="reference internal" href="#pv.get_with_metadata" title="pv.get_with_metadata"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_with_metadata()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">epics</span> <span class="kn">import</span> <span class="n">PV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span> <span class="o">=</span> <span class="n">PV</span><span class="p">(</span><span class="s1">&#39;xxx.VAL&#39;</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="go">1.00</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">.</span><span class="n">get_with_metadata</span><span class="p">()</span>
<span class="go">{&#39;status&#39;: 0,</span>
<span class="go"> &#39;severity&#39;: 0,</span>
<span class="go"> &#39;timestamp&#39;: 1543429156.811018,</span>
<span class="go"> &#39;posixseconds&#39;: 1543429156.0,</span>
<span class="go"> &#39;nanoseconds&#39;: 811018603,</span>
<span class="go"> &#39;value&#39;: 1.0}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">get_with_metadata</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="s1">&#39;ctrl&#39;</span><span class="p">))</span>
<span class="go">{&#39;upper_disp_limit&#39;: 100.0,</span>
<span class="go"> &#39;lower_disp_limit&#39;: -100.0,</span>
<span class="go"> &#39;upper_alarm_limit&#39;: 0.0,</span>
<span class="go"> &#39;upper_warning_limit&#39;: 0.0,</span>
<span class="go"> &#39;lower_warning_limit&#39;: 0.0,</span>
<span class="go"> &#39;lower_alarm_limit&#39;: 0.0,</span>
<span class="go"> &#39;upper_ctrl_limit&#39;: 100.0,</span>
<span class="go"> &#39;lower_ctrl_limit&#39;: -100.0,</span>
<span class="go"> &#39;precision&#39;: 3,</span>
<span class="go"> &#39;units&#39;: &#39;deg&#39;,</span>
<span class="go"> &#39;status&#39;: 0,</span>
<span class="go"> &#39;severity&#39;: 0,</span>
<span class="go"> &#39;value&#39;: 1.0}</span>
</pre></div>
</div>
</section>
<section id="example-of-using-info-and-more-properties-examples">
<h3>Example of using info and more properties examples<a class="headerlink" href="#example-of-using-info-and-more-properties-examples" title="Link to this heading">¶</a></h3>
<p>A PV has many attributes.  This can be seen from its <em>info</em> paragraph:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">epics</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">get_pv</span><span class="p">(</span><span class="s1">&#39;13IDA:m3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>
<span class="go">== 13IDA:m3  (native_double) ==</span>
<span class="go">   value      = 0.2</span>
<span class="go">   char_value = &#39;0.200&#39;</span>
<span class="go">   count      = 1</span>
<span class="go">   type       = double</span>
<span class="go">   units      = mm</span>
<span class="go">   precision  = 3</span>
<span class="go">   host       = ioc13ida.cars.aps.anl.gov:5064</span>
<span class="go">   access     = read/write</span>
<span class="go">   status     = 0</span>
<span class="go">   severity   = 0</span>
<span class="go">   timestamp  = 1274809682.967 (2010-05-25 12:48:02.967364)</span>
<span class="go">   upper_ctrl_limit    = 5.49393415451</span>
<span class="go">   lower_ctrl_limit    = -14.5060658455</span>
<span class="go">   upper_disp_limit    = 5.49393415451</span>
<span class="go">   lower_disp_limit    = -14.5060658455</span>
<span class="go">   upper_alarm_limit   = 0.0</span>
<span class="go">   lower_alarm_limit   = 0.0</span>
<span class="go">   upper_warning_limit = 0.0</span>
<span class="go">   lower_warning_limit = 0.0</span>
<span class="go">   PV is internally monitored, with 0 user-defined callbacks:</span>
<span class="go">=============================</span>
</pre></div>
</div>
<p>The individual attributes can also be accessed as below.  Many of these
(the <em>control attributes</em>, see <a class="reference internal" href="ca.html#ctrlvars-table"><span class="std std-ref">Table of Control Attributes</span></a>) will not be filled in until either the <a class="reference internal" href="#pv.info" title="pv.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">info</span></code></a>
attribute is accessed or until <a class="reference internal" href="#pv.get_ctrlvars" title="pv.get_ctrlvars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_ctrlvars()</span></code></a> is called.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span> <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
<span class="go">double</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">units</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">precision</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">lower_disp_limit</span><span class="p">)</span>
<span class="go">mm 3 -14.5060658455</span>
</pre></div>
</div>
</section>
<section id="getting-a-string-value">
<h3>Getting a string value<a class="headerlink" href="#getting-a-string-value" title="Link to this heading">¶</a></h3>
<p>It is not uncommon to want a string representation of a PVs value, for
example to show in a display window or to write to some report.  For string
PVs and integer PVs, this is a simple task.  For floating point values,
there is ambiguity how many significant digits to show. EPICS PVs all have
a <a class="reference internal" href="#pv.precision" title="pv.precision"><code class="xref py py-attr docutils literal notranslate"><span class="pre">precision</span></code></a> field. which sets how many digits after the decimal
place should be described.  In addition, for ENUM PVs, it would be
desire able to get at the name of the ENUM state, not just its integer
value.</p>
<p>To get the string representation of a PVs value, use either the
<a class="reference internal" href="#pv.char_value" title="pv.char_value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">char_value</span></code></a> attribute or the <cite>as_string=True</cite> argument to <a class="reference internal" href="#pv.get" title="pv.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a></p>
</section>
<section id="example-of-put">
<h3>Example of <a class="reference internal" href="#pv.put" title="pv.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code></a><a class="headerlink" href="#example-of-put" title="Link to this heading">¶</a></h3>
<p>To put a new value to a variable, either of these two approaches can be
used:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">epics</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;XXX&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Or (equivalently):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">epics</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">PV</span><span class="p">(</span><span class="s1">&#39;XXX&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#pv.value" title="pv.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">value</span></code></a> attribute is the only attribute that can be set.</p>
</section>
<section id="example-of-simple-callback">
<h3>Example of simple callback<a class="headerlink" href="#example-of-simple-callback" title="Link to this heading">¶</a></h3>
<p>It is often useful to get a notification of when a PV changes.  In general,
it would be inconvenient (and possibly inefficient) to have to continually
ask if a PVs value has changed.  Instead, it is better to set a <em>callback</em>
function: a function to be run when the value has changed.</p>
<p>A simple example of this would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">epics</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">onChanges</span><span class="p">(</span><span class="n">pvname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">char_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PV Changed! &#39;</span><span class="p">,</span> <span class="n">pvname</span><span class="p">,</span> <span class="n">char_value</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">())</span>

<span class="n">mypv</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">get_pv</span><span class="p">(</span><span class="s1">&#39;PyTest:ao1.VAL&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">onChanges</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Now wait for changes&#39;</span><span class="p">)</span>
<span class="n">expire_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mf">60.</span>
<span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">expire_time</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This first defines a <em>callback function</em> called <cite>onChanges()</cite> and then
simply waits for changes to happen.  Note that the callback function should
take keyword arguments, and generally use <cite>**kw</cite> to catch all arguments.
See <a class="reference internal" href="#pv-callbacks-label"><span class="std std-ref">User-supplied Callback functions</span></a> for more details.</p>
</section>
<section id="example-of-connection-callback">
<h3>Example of connection callback<a class="headerlink" href="#example-of-connection-callback" title="Link to this heading">¶</a></h3>
<p>A connection callback:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">epics</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">onConnectionChange</span><span class="p">(</span><span class="n">pvname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">conn</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PV connection status changed: </span><span class="si">{</span><span class="n">pvname</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">conn</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">onValueChange</span><span class="p">(</span><span class="n">pvname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PV value changed: </span><span class="si">{</span><span class="n">pvname</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s1">)  </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">mypv</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">get_pv</span><span class="p">(</span><span class="s1">&#39;PyTest:ao1.VAL&#39;</span><span class="p">,</span>
                    <span class="n">connection_callback</span><span class="o">=</span> <span class="n">onConnectionChange</span><span class="p">,</span>
                    <span class="n">callback</span><span class="o">=</span> <span class="n">onValueChange</span><span class="p">)</span>

<span class="n">mypv</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Now wait for changes&#39;</span><span class="p">)</span>
<span class="n">expire_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mf">60.</span>
<span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">expire_time</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="example-of-an-access-rights-callback">
<h3>Example of an access rights callback<a class="headerlink" href="#example-of-an-access-rights-callback" title="Link to this heading">¶</a></h3>
<p>Associating an access rights callback with a PV:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">epics</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">access_rights_callback</span><span class="p">(</span><span class="n">read_access</span><span class="p">,</span> <span class="n">write_access</span><span class="p">,</span> <span class="n">pv</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">pv</span><span class="o">.</span><span class="n">pvname</span><span class="si">}</span><span class="s1">: read=</span><span class="si">{</span><span class="n">read_access</span><span class="si">}</span><span class="s1">, write=</span><span class="si">{</span><span class="n">write_access</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">mypv</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">get_pv</span><span class="p">(</span><span class="s1">&#39;PyTest:ao1.VAL&#39;</span><span class="p">,</span> <span class="n">access_callback</span><span class="o">=</span><span class="n">access_rights_callback</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Now wait for changes&#39;</span><span class="p">)</span>
<span class="n">expire_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mf">60.</span>
<span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">expire_time</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="example-of-a-property-callback">
<h3>Example of a property callback<a class="headerlink" href="#example-of-a-property-callback" title="Link to this heading">¶</a></h3>
<p>Callbacks can be set up to receive events not only when a PVs value changes,
but also when certain of the PVs properties such as units or limits change.
To get such callbacks, subscribe with <cite>auto_monitor</cite> set to both Value and
Property changes, as with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">epics</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">onChange</span><span class="p">(</span><span class="n">pvname</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PV changed: </span><span class="si">{</span><span class="n">pvname</span><span class="si">}</span><span class="s1">, value=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">, units=</span><span class="si">{</span><span class="n">units</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">mypc</span> <span class="o">=</span> <span class="n">epics</span><span class="o">.</span><span class="n">get_pv</span><span class="p">(</span><span class="s1">&#39;PyTest:ao1.VAL&#39;</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="s1">&#39;ctrl&#39;</span><span class="p">,</span>
                    <span class="n">auto_monitor</span><span class="o">=</span><span class="n">epics</span><span class="o">.</span><span class="n">ca</span><span class="o">.</span><span class="n">dbr</span><span class="o">.</span><span class="n">DBE_VALUE</span><span class="o">|</span><span class="n">epics</span><span class="o">.</span><span class="n">ca</span><span class="o">.</span><span class="n">dbr</span><span class="o">.</span><span class="n">DBE_PROPERTY</span><span class="p">,</span>
                    <span class="n">callback</span><span class="o">=</span><span class="n">onChange</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Now wait for changes&#39;</span><span class="p">)</span>
<span class="n">expire_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mf">60.</span>
<span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">expire_time</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>note that in this example <cite>form=’ctrl’</cite> is used.  If the default form of ‘time’
(or ‘native’) had been used, the callback would be called when the property
changed, but the value of that property (or even which property changed) would
not be included in the callback arguments.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ca.html" title="ca: Low-level Channel Access module"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="PyEpics Overview"
             >previous</a> |</li>
   <li>[<a href="installation.html">install</a></li>
   <li>|<a href="overview.html">overview</a></li>
   <li>|<a href="#">pv</a></li>
   <li>|<a href="ca.html">ca</a></li>
   <li>|<a href="arrays.html">arrays</a></li>
   <li>|<a href="devices.html">devices</a></li>
   <li>|<a href="alarm.html">alarm</a></li>
   <li>|<a href="autosave.html">autosave</a></li>
   <li>|<a href="wx.html">wx</a></li>
   <li>|<a href="advanced.html">advanced</a>]</li>

        <li class="nav-item nav-item-this"><a href="">PV: Epics Process Variables</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2021, Matthew Newville.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>